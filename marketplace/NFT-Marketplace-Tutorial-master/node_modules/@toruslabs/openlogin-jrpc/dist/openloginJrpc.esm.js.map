{"version":3,"file":"openloginJrpc.esm.js","sources":["../src/basePostMessageStream.ts","../src/safeEventEmitter.ts","../src/serializableError.ts","../src/jrpc.ts","../src/jrpcEngine.ts","../src/substream.ts","../src/mux.ts","../src/postMessageStream.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["noop","undefined","SYN","ACK","BRK","BasePostMessageStream","Duplex","constructor","_ref","name","target","targetWindow","window","targetOrigin","objectMode","_defineProperty","Error","_init","_haveSyn","_name","_target","_targetWindow","_targetOrigin","_onMessage","onMessage","bind","_synIntervalId","addEventListener","_handShake","_break","cork","_write","_onData","data","uncork","push","err","emit","_postMessage","originConstraint","postMessage","event","message","origin","source","_read","_","cb","_destroy","removeEventListener","safeApply","handler","context","args","Reflect","apply","setTimeout","arrayClone","arr","n","length","copy","Array","i","SafeEventEmitter","EventEmitter","type","doError","events","_events","error","_len","arguments","_key","er","len","listeners","SerializableError","code","Number","isInteger","toString","stringify","stack","getRpcPromiseCallback","resolve","reject","unwrapResult","response","isArray","result","createErrorMiddleware","log","req","res","next","end","method","done","createStreamMiddleware","idMap","readNoop","processResponse","id","Object","assign","processNotification","processMessage","_encoding","isNotification","_err","stream","read","write","middleware","createScaffoldMiddleware","handlers","createIdRemapMiddleware","_end","originalId","newId","randomId","createLoggerMiddleware","logger","debug","createAsyncMiddleware","asyncMiddleware","resolveNextPromise","nextPromise","Promise","returnHandlerCallback","nextWasCalled","asyncNext","runReturnHandlersCallback","JRPCEngine","_middleware","_runAllMiddleware","middlewareStack","returnHandlers","isComplete","_runMiddleware","reverse","serializeError","returnHandler","_runReturnHandlers","_checkForCompletion","handle","_handleBatch","_handle","_promiseHandle","asMiddleware","middlewareError","handlerCallback","reqs","responses","all","map","callerReq","jsonrpc","_objectSpread","_processRequest","_error","mergeMiddleware","engine","forEach","createEngineStream","opts","on","Substream","parent","_parent","chunk","callback","IGNORE_SUBSTREAM","Symbol","ObjectMultiplex","_substreams","createStream","substream","anyStreamEnd","destroy","ignoreStream","console","warn","_cb","once","eos","readable","writable","setupMultiplex","mux","getStream","streamHelper","pump","PostMessageStream","dataObj","dataObjData","params","dataObjDataParam","_origin","location"],"mappings":"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"}