{"version":3,"file":"openlogin.cjs.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,4BAA4B;;;;;;;;;;;;;;;;;;;;ACA6C;AACjC;AACuF;AAC9C;AAC5D;AAEyF;AAatE;AACZ;AACkG;AA0BpI,MAAMyB,SAAS,CAAC;EAOdC,WAAWA,CAACC,OAAyB,EAAE;IAAA,IAAAC,cAAA,EAAAC,kBAAA,EAAAC,kBAAA,EAAAC,oBAAA,EAAAC,eAAA,EAAAC,qBAAA,EAAAC,mBAAA,EAAAC,mBAAA,EAAAC,oBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,qBAAA;IAAAC,wBAAA;IAAAA,wBAAA;IAAAA,wBAAA;IACrC,IAAI,CAACC,QAAQ,GAAG,IAAIC,KAAK,CAAC,IAAIzB,uBAAQ,EAAE,EAAE;MACxC0B,cAAc,EAAEA,CAAA,KAAM,IAAI,CAAE;IAC9B,CAAC,CAAC;;IACF,IAAI,CAAChB,OAAO,CAACiB,UAAU,EAAE;MACvB,IAAIjB,OAAO,CAACkB,OAAO,KAAK/B,mDAAyB,EAAE;QACjDa,OAAO,CAACiB,UAAU,GAAG,2BAA2B;MAClD,CAAC,MAAM,IAAIjB,OAAO,CAACkB,OAAO,KAAK/B,6CAAsB,EAAE;QACrDa,OAAO,CAACiB,UAAU,GAAG,4BAA4B;MACnD,CAAC,MAAM,IAAIjB,OAAO,CAACkB,OAAO,KAAK/B,mDAAyB,EAAE;QACxDa,OAAO,CAACiB,UAAU,GAAG,4BAA4B;MACnD,CAAC,MAAM,IAAIjB,OAAO,CAACkB,OAAO,KAAK/B,yDAA4B,EAAE;QAC3Da,OAAO,CAACiB,UAAU,GAAG,+BAA+B;MACtD,CAAC,MAAM,IAAIjB,OAAO,CAACkB,OAAO,KAAK/B,mDAAyB,EAAE;QACxDa,OAAO,CAACiB,UAAU,GAAG,+BAA+B;MACtD,CAAC,MAAM,IAAIjB,OAAO,CAACkB,OAAO,KAAK/B,6CAAsB,EAAE;QACrDa,OAAO,CAACiB,UAAU,GAAG,4BAA4B;MACnD,CAAC,MAAM,IAAIjB,OAAO,CAACkB,OAAO,KAAK/B,2DAA6B,EAAE;QAC5Da,OAAO,CAACiB,UAAU,GAAG,uBAAuB;MAC9C;IACF;IACA,IAAI,CAACjB,OAAO,CAACiB,UAAU,EAAE;MACvB,MAAM,IAAIS,KAAK,CAAC,mCAAmC,CAAC;IACtD;IACA7B,+BAAa,CAACG,OAAO,CAACiB,UAAU,CAAC;IAEjC,IAAI,CAACU,SAAS,CAAAC,aAAA,CAAAA,aAAA,KACT5B,OAAO;MACV6B,KAAK,GAAA5B,cAAA,GAAED,OAAO,CAAC6B,KAAK,cAAA5B,cAAA,cAAAA,cAAA,GAAI,KAAK;MAC7BgB,UAAU,EAAEjB,OAAO,CAACiB,UAAU;MAC9Ba,SAAS,GAAA5B,kBAAA,GAAEF,OAAO,CAAC8B,SAAS,cAAA5B,kBAAA,cAAAA,kBAAA,GAAK,GAAEF,OAAO,CAACiB,UAAW,QAAO;MAC7Dc,SAAS,GAAA5B,kBAAA,GAAEH,OAAO,CAAC+B,SAAS,cAAA5B,kBAAA,cAAAA,kBAAA,GAAK,GAAEH,OAAO,CAACiB,UAAW,eAAc;MACpEe,WAAW,GAAA5B,oBAAA,GAAEJ,OAAO,CAACgC,WAAW,cAAA5B,oBAAA,cAAAA,oBAAA,GAAK,GAAE6B,MAAM,CAACC,QAAQ,CAACC,QAAS,KAAIF,MAAM,CAACC,QAAQ,CAACE,IAAK,GAAEH,MAAM,CAACC,QAAQ,CAACG,QAAS,EAAC;MACrHC,MAAM,GAAAjC,eAAA,GAAEL,OAAO,CAACsC,MAAM,cAAAjC,eAAA,cAAAA,eAAA,GAAIjB,2CAAgB;MAC1CoD,oBAAoB,GAAAlC,qBAAA,GAAEN,OAAO,CAACwC,oBAAoB,cAAAlC,qBAAA,cAAAA,qBAAA,GAAI,IAAI;MAC1DmC,UAAU,GAAAlC,mBAAA,GAAEP,OAAO,CAACyC,UAAU,cAAAlC,mBAAA,cAAAA,mBAAA,GAAI;QAAE,CAAC0B,MAAM,CAACC,QAAQ,CAACQ,MAAM,GAAG;MAAG,CAAC;MAClEC,UAAU,GAAAnC,mBAAA,GAAER,OAAO,CAAC2C,UAAU,cAAAnC,mBAAA,cAAAA,mBAAA,GAAI,CAAC,CAAC;MACpCoC,WAAW,GAAAnC,oBAAA,GAAET,OAAO,CAAC4C,WAAW,cAAAnC,oBAAA,cAAAA,oBAAA,GAAI,CAAC,CAAC;MACtCoC,iBAAiB,GAAAnC,qBAAA,GAAEV,OAAO,CAAC6C,iBAAiB,cAAAnC,qBAAA,cAAAA,qBAAA,GAAI,iCAAiC;MACjFoC,UAAU,EAAE9C,OAAO,CAAC8C,UAAU,KAAK,SAAS,GAAG,SAAS,GAAG,OAAO;MAClEC,iBAAiB,GAAApC,qBAAA,GAAEX,OAAO,CAAC+C,iBAAiB,cAAApC,qBAAA,cAAAA,qBAAA,GAAI,EAAE;MAClDqC,kBAAkB,GAAApC,qBAAA,GAAEZ,OAAO,CAACgD,kBAAkB,cAAApC,qBAAA,cAAAA,qBAAA,GAAI,CAAC,UAAU;IAAC,GAC9D;EACJ;EAEA,IAAIqC,OAAOA,CAAA,EAAW;IACpB,OAAO,IAAI,CAACC,KAAK,CAACD,OAAO,GAAG,IAAI,CAACC,KAAK,CAACD,OAAO,CAACE,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC,GAAG,EAAE;EACvE;EAEA,IAAIC,UAAUA,CAAA,EAAW;IACvB,OAAO,IAAI,CAACF,KAAK,CAACE,UAAU,GAAG,IAAI,CAACF,KAAK,CAACE,UAAU,CAACD,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC,GAAG,EAAE;EAC7E;EAEAxB,SAASA,CAAC3B,OAAmC,EAAQ;IACnD,IAAI,CAACkD,KAAK,GAAG;MACXZ,MAAM,EAAEtC,OAAO,CAACsC,MAAM;MACtBpB,OAAO,EAAElB,OAAO,CAACkB,OAAO;MACxBmC,KAAK,EAAEhE,qDAA0B,CAACW,OAAO,CAAC+C,iBAAiB,EAAE/C,OAAO,CAAC8C,UAAU,CAAC;MAChFS,SAAS,EAAEvD,OAAO,CAACiB,UAAU;MAC7BuC,QAAQ,EAAExD,OAAO,CAAC8B,SAAS;MAC3B2B,QAAQ,EAAEzD,OAAO,CAAC+B,SAAS;MAC3B2B,QAAQ,EAAE1D,OAAO,CAAC0D,QAAQ;MAC1B1B,WAAW,EAAEhC,OAAO,CAACgC,WAAW;MAChCQ,oBAAoB,EAAExC,OAAO,CAACwC,oBAAoB;MAClDC,UAAU,EAAEzC,OAAO,CAACyC,UAAU;MAC9BG,WAAW,EAAE5C,OAAO,CAAC4C,WAAW;MAChCe,UAAU,EAAE,CAAC3D,OAAO,CAAC6B,KAAK;MAC1Bc,UAAU,EAAE3C,OAAO,CAAC2C,UAAU;MAC9BiB,gBAAgB,EAAE5D,OAAO,CAAC6C,iBAAiB;MAC3CgB,gBAAgB,EAAE7D,OAAO,CAAC+C,iBAAiB;MAC3CC,kBAAkB,EAAEhD,OAAO,CAACgD;IAC9B,CAAC;EACH;EAEA,MAAMc,IAAIA,CAAA,EAAkB;IAC1B,IAAI,IAAI,CAACZ,KAAK,CAAChC,OAAO,KAAK/B,mDAAyB,EAAE;MACpD;MACA;MACA4E,OAAO,CAAChF,GAAG,CAAC,6EAA6E,EAAE,gBAAgB,CAAC;IAC9G;IACA,IAAI,IAAI,CAACmE,KAAK,CAACZ,MAAM,KAAKlD,mEAA4B,EAAE;MACtD,MAAM,IAAI,CAAC6E,gBAAgB,EAAE;MAC7B;MACA,IAAI,CAACf,KAAK,CAACS,UAAU,GAAG,KAAK;IAC/B,CAAC,MAAM;MACL;MACA,MAAMO,OAAO,CAACC,GAAG,CAAC,CAAC,IAAI,CAACC,WAAW,CAAC,IAAI,CAAClB,KAAK,CAACK,SAAS,CAAC,EAAE,IAAI,CAACU,gBAAgB,EAAE,CAAC,CAAC;MACpF,IAAI,CAACnD,QAAQ,CAACgD,IAAI,CAAC;QAAEO,UAAU,EAAE,IAAI,CAACA,UAAU;QAAEd,SAAS,EAAE,IAAI,CAACL,KAAK,CAACK;MAAU,CAAC,CAAC;IACtF;IAEA,MAAMe,MAAM,GAAG5E,oCAAkB,CAAC,IAAI,CAACwD,KAAK,CAACV,oBAAoB,CAAC;IAClE,IAAI8B,MAAM,CAACC,SAAS,EAAE;MACpB,IAAI,CAACrB,KAAK,CAACG,KAAK,CAACmB,GAAG,CAAC,WAAW,EAAEF,MAAM,CAACC,SAAS,CAAC;IACrD;IACA,IAAI,IAAI,CAACrB,KAAK,CAACZ,MAAM,KAAKlD,mEAA4B,EAAE;MACtD,IAAI,CAACqF,UAAU,CAACH,MAAM,CAAC;IACzB,CAAC,MAAM;MACL,IAAI,CAACG,UAAU,CAAC,MAAM,IAAI,CAACC,QAAQ,EAAE,CAAC;IACxC;IAEA,IAAI,IAAI,CAACxB,KAAK,CAACS,UAAU,EAAE;MACzB,MAAMgB,GAAG,GAAG,MAAM,IAAI,CAACC,gBAAgB,EAAE;MACzC,IAAI,CAAC1B,KAAK,CAACS,UAAU,GAAG,CAAC,CAACgB,GAAG,CAAChB,UAAU;IAC1C;EACF;EAEA,MAAMM,gBAAgBA,CAAA,EAAkB;IACtC,MAAMY,kBAAkB,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAAC,IAAI,CAAC9B,KAAK,CAACT,UAAU,CAAC,CAAC;IAC5EwC,MAAM,CAACC,IAAI,CAACL,kBAAkB,CAAC,CAACM,OAAO,CAAEC,GAAG,IAAK;MAC/C,IAAIP,kBAAkB,CAACO,GAAG,CAAC,KAAK,EAAE,EAAE,OAAOP,kBAAkB,CAACO,GAAG,CAAC;IACpE,CAAC,CAAC;IACF,MAAM,CAACC,SAAS,EAAE1C,UAAU,CAAC,GAAG,MAAMuB,OAAO,CAACC,GAAG,CAAC,CAAC,IAAI,CAACmB,YAAY,EAAE,EAAE,IAAI,CAACC,aAAa,EAAE,CAAC,CAAC;IAC9F,IAAI,CAACd,UAAU,CAAC;MAAEhC,UAAU,EAAAb,aAAA,CAAAA,aAAA,KAAOyD,SAAS,GAAKR,kBAAkB,CAAE;MAAElC,UAAU,EAAAf,aAAA,CAAAA,aAAA,KAAOe,UAAU,GAAK,IAAI,CAACO,KAAK,CAACP,UAAU;IAAG,CAAC,CAAC;EACnI;EAEA,MAAM2C,YAAYA,CAAA,EAAwB;IACxC,IAAI;MACF,MAAM;QAAE5B;MAAS,CAAC,GAAG,IAAI,CAACR,KAAK;MAC/B,IAAI,CAACQ,QAAQ,EAAE;QACb,MAAM,IAAIhC,KAAK,CAAC,sBAAsB,CAAC;MACzC;MACA,MAAM8D,GAAG,GAAG,IAAIC,GAAG,CAAC,wCAAwC,CAAC;MAC7DD,GAAG,CAACE,YAAY,CAACC,MAAM,CAAC,YAAY,EAAE,IAAI,CAACzC,KAAK,CAACQ,QAAQ,CAAC;MAC1D8B,GAAG,CAACE,YAAY,CAACC,MAAM,CAAC,SAAS,EAAE,IAAI,CAACzC,KAAK,CAAChC,OAAO,CAAC;MACtD,MAAMyD,GAAG,GAAG,MAAMlG,oCAAG,CAA8B+G,GAAG,CAACI,IAAI,CAAC;MAC5D,OAAOjB,GAAG,CAACkB,WAAW;IACxB,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV;MACA,OAAO,CAAC,CAAC;IACX;EACF;EAEA,MAAMP,aAAaA,CAAA,EAA4B;IAC7C,IAAI;MACF,MAAM;QAAE7B;MAAS,CAAC,GAAG,IAAI,CAACR,KAAK;MAC/B,IAAI,CAACQ,QAAQ,EAAE;QACb,MAAM,IAAIhC,KAAK,CAAC,sBAAsB,CAAC;MACzC;MACA,MAAM8D,GAAG,GAAG,IAAIC,GAAG,CAAC,yCAAyC,CAAC;MAC9DD,GAAG,CAACE,YAAY,CAACC,MAAM,CAAC,YAAY,EAAE,IAAI,CAACzC,KAAK,CAACQ,QAAQ,CAAC;MAC1D,MAAMiB,GAAG,GAAG,MAAMlG,oCAAG,CAAiC+G,GAAG,CAACI,IAAI,CAAC;MAC/D,OAAOjB,GAAG,CAAChC,UAAU;IACvB,CAAC,CAAC,OAAOmD,CAAC,EAAE;MACV;MACA,OAAO,CAAC,CAAC;IACX;EACF;EAEA,MAAMC,KAAKA,CAACzB,MAAiD,EAAgC;IAC3F,IAAI,CAACA,MAAM,IAAI,CAACA,MAAM,CAAC0B,aAAa,EAAE;MACpC,MAAM,IAAItE,KAAK,CAAE,qCAAoC,CAAC;IACxD;IAEA,OAAO,IAAI,CAACuE,cAAc,CAAC3B,MAAM,CAAC;EACpC;EAEA,MAAM2B,cAAcA,CAAC3B,MAAiD,EAAgC;IACpG,MAAM4B,aAAiC,GAAG;MACxClE,WAAW,EAAE,IAAI,CAACkB,KAAK,CAAClB;IAC1B,CAAC;IAED,MAAMmE,WAAwB,GAAAvE,aAAA,CAAAA,aAAA;MAC5BoE,aAAa,EAAE1B,MAAM,CAAC0B;IAAa,GAChCE,aAAa,GACb5B,MAAM,CACV;IAED,MAAMK,GAAG,GAAG,MAAM,IAAI,CAACyB,OAAO,CAAsD;MAClFC,MAAM,EAAEnH,8CAAsB;MAC9BqH,mBAAmB,EAAE,CAACnH,2CAAgB,EAAEA,qCAAa,CAAC;MACtDoE,QAAQ,EAAE,IAAI,CAACN,KAAK,CAACM,QAAQ;MAC7BC,QAAQ,EAAE,IAAI,CAACP,KAAK,CAACO,QAAQ;MAC7Ba,MAAM,EAAE,CAAC6B,WAAW;IACtB,CAAC,CAAC;IACF,IAAI,CAACjD,KAAK,CAACD,OAAO,GAAG0B,GAAG,CAAC1B,OAAO;IAChC,IAAI0B,GAAG,CAACtB,KAAK,EAAE;MACb,IAAI,CAACoB,UAAU,CAACE,GAAG,CAAC;IACtB,CAAC,MAAM,IAAI,IAAI,CAACzB,KAAK,CAACD,OAAO,IAAI,IAAI,CAACC,KAAK,CAACS,UAAU,EAAE;MACtD,IAAI,CAACc,UAAU,CAAC,MAAM,IAAI,CAACC,QAAQ,EAAE,CAAC;IACxC;IACA,OAAO;MAAEzB,OAAO,EAAE,IAAI,CAACA;IAAQ,CAAC;EAClC;EAEA,MAAMwD,MAAMA,CAAA,EAA4F;IAAA,IAA3FC,YAAqE,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IACrF,MAAMrC,MAA+B,GAAG,CAAC,CAAC;IAC1C;IACAA,MAAM,CAACtC,WAAW,GAAG,IAAI,CAACkB,KAAK,CAAClB,WAAW;IAC3CsC,MAAM,CAACwC,SAAS,GAAG,IAAI,CAAC5D,KAAK,CAACQ,QAAQ;IACtCY,MAAM,CAACC,SAAS,GAAG,IAAI,CAACrB,KAAK,CAACG,KAAK,CAAC5E,GAAG,CAAC,WAAW,CAAC;IAEpD,IAAIiI,YAAY,CAAChD,QAAQ,EAAE;MACzBY,MAAM,CAACwC,SAAS,GAAGJ,YAAY,CAAChD,QAAQ;IAC1C;IACA,IAAIgD,YAAY,CAAC1E,WAAW,KAAK6E,SAAS,EAAE;MAC1CvC,MAAM,CAACtC,WAAW,GAAG0E,YAAY,CAAC1E,WAAW;IAC/C;IAEA,MAAMuE,mBAAmB,GAAG,IAAI,CAACrD,KAAK,CAACZ,MAAM,KAAKlD,mEAA4B,GAAG,CAACJ,wDAA6B,CAAC,GAAG,CAACA,gDAAyB,CAAC;IAC9I,MAAM2F,GAAG,GAAG,MAAM,IAAI,CAACyB,OAAO,CAAO;MACnCC,MAAM,EAAEnH,gDAAuB;MAC/BoF,MAAM,EAAE,CAACA,MAAM,CAAC;MAChBd,QAAQ,EAAE,IAAI,CAACN,KAAK,CAACM,QAAQ;MAC7BC,QAAQ,EAAE,IAAI,CAACP,KAAK,CAACO,QAAQ;MAC7B8C;IACF,CAAC,CAAC;IAEF,IAAI,CAAC9B,UAAU,CAAC;MACdxB,OAAO,EAAE,EAAE;MACXG,UAAU,EAAE,EAAE;MACd6D,SAAS,EAAE,EAAE;MACbC,eAAe,EAAE,EAAE;MACnBC,IAAI,EAAE,EAAE;MACR9D,KAAK,EAAE;QACL+D,IAAI,EAAE,EAAE;QACRC,YAAY,EAAE,EAAE;QAChBC,SAAS,EAAE,EAAE;QACbC,OAAO,EAAE,EAAE;QACXC,YAAY,EAAE,EAAE;QAChBC,gBAAgB,EAAE,EAAE;QACpBlD,SAAS,EAAE,EAAE;QACbV,gBAAgB,EAAE,EAAE;QACpB6D,QAAQ,EAAE,EAAE;QACZC,KAAK,EAAE;MACT;IACF,CAAC,CAAC;IAEF,OAAOhD,GAAG;EACZ;EAEA,MAAMyB,OAAOA,CAAIwB,IAAmB,EAAc;IAAA,IAAAC,IAAA;IAChD,MAAMC,GAAG,GAAGhJ,6BAAQ,EAAE;IACtB,IAAI;MAAEwF;IAAO,CAAC,GAAGsD,IAAI;;IAErB;IACA;IACA,MAAMG,OAA6B,GAAG,CAAC,CAAC;IACxC,IAAIzD,MAAM,CAACsC,MAAM,KAAK,CAAC,EAAE,MAAM,IAAIlF,KAAK,CAAC,mDAAmD,CAAC;IAC7F,MAAM;MAAE8B,QAAQ;MAAEC,QAAQ;MAAE4C,MAAM;MAAEE;IAAoB,CAAC,GAAGqB,IAAI;IAChE,IAAIrB,mBAAmB,CAACK,MAAM,KAAK,CAAC,EAAE,MAAM,IAAIlF,KAAK,CAAC,yBAAyB,CAAC;IAEhF,IAAI,IAAI,CAACwB,KAAK,CAACQ,QAAQ,EAAE;MACvBqE,OAAO,CAACjB,SAAS,GAAG,IAAI,CAAC5D,KAAK,CAACQ,QAAQ;IACzC;IACA,IAAI,IAAI,CAACR,KAAK,CAACW,gBAAgB,EAAE;MAC/BkE,OAAO,CAAChF,iBAAiB,GAAG,IAAI,CAACG,KAAK,CAACW,gBAAgB;IACzD;IAEA,IAAI,IAAI,CAACZ,OAAO,EAAE;MAChB,MAAM+E,QAAQ,GAAG;QACftE,QAAQ,EAAEqE,OAAO,CAACjB,SAAS;QAC3BmB,SAAS,EAAEC,IAAI,CAACC,GAAG,EAAE,CAACC,QAAQ;MAChC,CAAC;MACD,MAAMC,GAAG,GAAG,MAAM7J,kBAAI,CACpB8J,MAAM,CAACC,IAAI,CAAC,IAAI,CAACtF,OAAO,EAAE,KAAK,CAAC,EAChCqF,MAAM,CAACC,IAAI,CAAC1J,2BAAM,CAAC,WAAW,CAAC,CAAC2J,MAAM,CAAC1D,IAAI,CAACE,SAAS,CAACgD,QAAQ,CAAC,CAAC,CAACS,MAAM,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CACvF;MACDV,OAAO,CAACW,KAAK,GAAGnK,uBAAS,CAAC+J,MAAM,CAACC,IAAI,CAAC,IAAI,CAACtF,OAAO,EAAE,KAAK,CAAC,CAAC,CAACmF,QAAQ,CAAC,KAAK,CAAC;MAC3EL,OAAO,CAACY,QAAQ,GAAGhK,iCAAgB,CAAC0J,GAAG,CAAC;MACxCN,OAAO,CAACc,SAAS,GAAGb,QAAQ;IAC9B;IAEAD,OAAO,CAACe,WAAW,GAAG,IAAI,CAAC5F,KAAK,CAACT,UAAU;IAC3CsF,OAAO,CAACgB,eAAe,GAAG,IAAI,CAAC7F,KAAK,CAACP,UAAU;IAC/CoF,OAAO,CAACiB,YAAY,GAAG,IAAI,CAAC9F,KAAK,CAACN,WAAW;IAC7CmF,OAAO,CAACkB,UAAU,GAAG,IAAI,CAAC/F,KAAK,CAACG,KAAK,CAAC5E,GAAG,CAAC,WAAW,CAAC;IACtDsJ,OAAO,CAACmB,mBAAmB,GAAG,IAAI,CAAChG,KAAK,CAACF,kBAAkB;IAE3D,IAAI,CAAC+E,OAAO,CAACkB,UAAU,EAAE;MACvB,MAAM1E,SAAS,GAAGzF,6BAAQ,EAAE;MAC5BiJ,OAAO,CAACkB,UAAU,GAAG1E,SAAmB;MACxC,IAAI,CAACrB,KAAK,CAACG,KAAK,CAACmB,GAAG,CAAC,WAAW,EAAED,SAAS,CAAC;IAC9C;;IAEA;IACAD,MAAM,GAAG,CAAA1C,aAAA,CAAAA,aAAA,KAAMmG,OAAO,GAAKzD,MAAM,CAAC,CAAC,CAAC,EAAG;;IAEvC;;IAEA,IAAIiC,mBAAmB,CAAC4C,QAAQ,CAACnK,gDAAyB,CAAC,EAAE;MAC3D,OAAO,IAAI,CAACoK,YAAY,CAA+B;QAAE/C,MAAM;QAAE/B;MAAO,CAAC,CAAC;IAC5E;;IAEA;IACAA,MAAM,CAAC,CAAC,CAAC,CAAC+E,OAAO,GAAG,IAAI5D,GAAG,EAAAoC,IAAA,GAAEvD,MAAM,CAAC,CAAC,CAAC,CAACtC,WAAW,cAAA6F,IAAA,cAAAA,IAAA,GAAe,IAAI,CAAC3E,KAAK,CAAClB,WAAW,CAAC,CAACU,MAAM;;IAE/F;IACA,IAAI,IAAI,CAACQ,KAAK,CAACS,UAAU,EAAE;MACzB;MACA,MAAM,IAAI,CAAC2F,WAAW,CAACxB,GAAG,EAAExD,MAAM,CAAC;MACnC;MACAA,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;IACf;IAEA,IAAI,CAACd,QAAQ,IAAI,CAACC,QAAQ,EAAE;MAC1B,MAAM,IAAI/B,KAAK,CAAC,kCAAkC,CAAC;IACrD;;IAEA;IACA;;IAEA,IAAI,IAAI,CAACwB,KAAK,CAACZ,MAAM,KAAKlD,2CAAgB,IAAI,IAAI,CAAC8D,KAAK,CAACZ,MAAM,KAAKlD,mEAA4B,EAAE;MAChG;;MAEA,IAAImH,mBAAmB,CAAC4C,QAAQ,CAACnK,wDAA6B,CAAC,EAAE;QAC/D;QACAuK,UAAU,CAAC,MAAM;UACftH,MAAM,CAACC,QAAQ,CAAC0D,IAAI,GAAGpG,8BAAY,CAAC;YAClCgK,OAAO,EAAEhG,QAAQ;YACjBiG,IAAI,EAAE;cAAEC,SAAS,EAAE9K,iCAAY,CAAC0F,MAAM,CAAC,CAAC,CAAC,CAAC;cAAEqF,IAAI,EAAE7B,GAAG;cAAE8B,OAAO,EAAEvD;YAAO;UACzE,CAAC,CAAC;QACJ,CAAC,EAAE,EAAE,CAAC;QACN,OAAO,CAAC,CAAC;MACX;MAEA,IAAIE,mBAAmB,CAAC4C,QAAQ,CAACnK,kDAA0B,CAAC,EAAE;QAC5D,MAAM6K,CAAC,GAAG,IAAIpE,GAAG,CACfjG,8BAAY,CAAC;UACXgK,OAAO,EAAE/F,QAAQ;UACjBgG,IAAI,EAAE;YAAEC,SAAS,EAAE9K,iCAAY,CAAC0F,MAAM,CAAC,CAAC,CAAC,CAAC;YAAEqF,IAAI,EAAE7B,GAAG;YAAE8B,OAAO,EAAEvD;UAAO;QACzE,CAAC,CAAC,CACH;QACD,MAAMyD,SAAS,GAAG7H,MAAM,CAAC8H,IAAI,CAACF,CAAC,CAACzB,QAAQ,EAAE,EAAE,QAAQ,EAAEzI,kCAAgB,EAAE,CAAC;QACzE,OAAOJ,0BAAQ,CAAIuI,GAAG,EAAEgC,SAAS,CAAC;MACpC;IACF,CAAC,MAAM;MACL;;MAEA,IAAIvD,mBAAmB,CAAC4C,QAAQ,CAACnK,kDAA0B,CAAC,EAAE;QAC5D,MAAM6K,CAAC,GAAG,IAAIpE,GAAG,CACfjG,8BAAY,CAAC;UACXgK,OAAO,EAAE/F,QAAQ;UACjBgG,IAAI,EAAE;YAAEC,SAAS,EAAE9K,iCAAY,CAAC0F,MAAM,CAAC,CAAC,CAAC,CAAC;YAAEqF,IAAI,EAAE7B,GAAG;YAAE8B,OAAO,EAAEvD;UAAO;QACzE,CAAC,CAAC,CACH;QACD,MAAMyD,SAAS,GAAG7H,MAAM,CAAC8H,IAAI,CAACF,CAAC,CAACzB,QAAQ,EAAE,EAAE,QAAQ,EAAEzI,kCAAgB,EAAE,CAAC;QACzE,OAAOJ,0BAAQ,CAAIuI,GAAG,EAAEgC,SAAS,CAAC;MACpC;MAEA,IAAIvD,mBAAmB,CAAC4C,QAAQ,CAACnK,wDAA6B,CAAC,EAAE;QAC/D;QACAuK,UAAU,CAAC,MAAM;UACftH,MAAM,CAACC,QAAQ,CAAC0D,IAAI,GAAGpG,8BAAY,CAAC;YAClCgK,OAAO,EAAEhG,QAAQ;YACjBiG,IAAI,EAAE;cAAEC,SAAS,EAAE9K,iCAAY,CAAC0F,MAAM,CAAC,CAAC,CAAC,CAAC;cAAEqF,IAAI,EAAE7B,GAAG;cAAE8B,OAAO,EAAEvD;YAAO;UACzE,CAAC,CAAC;QACJ,CAAC,EAAE,EAAE,CAAC;QACN,OAAO,IAAI;MACb;IACF;IAEA,MAAM,IAAI3E,KAAK,CAAC,kCAAkC,CAAC;EACrD;EAEA,MAAM0C,WAAWA,CAAC4F,GAAW,EAAiB;IAC5C,MAAMvK,+BAAa,EAAE;IACrB,MAAMwK,kBAAkB,GAAGC,QAAQ,CAACC,cAAc,CAAClL,mCAAiB,CAAsB;IAC1F,IAAIgL,kBAAkB,EAAE;MACtBA,kBAAkB,CAACG,MAAM,EAAE;MAC3BrL,gCAAQ,CAAC,qDAAqD,CAAC;IACjE;IACA,IAAI,CAACsF,UAAU,GAAGzE,+BAAa,CAC5B;AACP,aAAaX,mCAAkB;AAC/B;AACA,eAAe+K,GAAI;AACnB;AACA;AACA,iBAAiB,CACZ;IACDE,QAAQ,CAACI,IAAI,CAACC,WAAW,CAAC,IAAI,CAAClG,UAAU,CAAC;IAC1C,OAAO,IAAIH,OAAO,CAAQsG,OAAO,IAAK;MACpC,IAAI,CAACnG,UAAU,CAACoG,MAAM,GAAG,MAAM;QAC7BD,OAAO,EAAE;MACX,CAAC;IACH,CAAC,CAAC;EACJ;EAEA,MAAMpB,YAAYA,CAAOxB,IAAoB,EAAc;IACzD;IACA,IAAI,CAACA,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAI8C,KAAK,CAACC,OAAO,CAAC/C,IAAI,CAAC,EAAE;MAC5D,MAAM,IAAIlG,KAAK,CAAC,sBAAsB,CAAC;IACzC;IAEA,MAAM;MAAE2E,MAAM;MAAE/B;IAAO,CAAC,GAAGsD,IAAI;IAE/B,IAAI,OAAOvB,MAAM,KAAK,QAAQ,IAAIA,MAAM,CAACO,MAAM,KAAK,CAAC,EAAE;MACrD,MAAM,IAAIlF,KAAK,CAAC,wBAAwB,CAAC;IAC3C;IAEA,IAAI4C,MAAM,KAAKuC,SAAS,IAAI,CAAC6D,KAAK,CAACC,OAAO,CAACrG,MAAM,CAAC,EAAE;MAClD,MAAM,IAAI5C,KAAK,CAAC,wBAAwB,CAAC;IAC3C;IAEA,IAAI4C,MAAM,CAACsC,MAAM,KAAK,CAAC,EAAE;MACvBtC,MAAM,CAACsG,IAAI,CAAC,CAAC,CAAC,CAAC;IACjB;IAEA,OAAO,IAAI1G,OAAO,CAAI,CAACsG,OAAO,EAAEK,MAAM,KAAK;MACzC,IAAI,CAAC/J,QAAQ,CAACgK,WAAW,CAAC;QAAEzE,MAAM;QAAE/B;MAAO,CAAC,EAAE5F,yCAAqB,CAAC8L,OAAO,EAAEK,MAAM,CAAC,CAAC;IACvF,CAAC,CAAC;EACJ;EAEA,MAAMjG,gBAAgBA,CAAA,EAAqC;IACzD,OAAO,IAAI,CAACwE,YAAY,CAAqD;MAC3E/C,MAAM,EAAEnH,sEAAkC;MAC1CoF,MAAM,EAAE,CAAC;QAAEwE,WAAW,EAAE,IAAI,CAAC5F,KAAK,CAACT;MAAW,CAAC;IACjD,CAAC,CAAC;EACJ;EAEA,MAAM6G,WAAWA,CAACxB,GAAW,EAAEkD,IAA+B,EAAiB;IAC7E,MAAM,IAAI,CAAC5E,OAAO,CAAC;MACjBG,mBAAmB,EAAE,CAACvH,gDAAyB,CAAC;MAChDqH,MAAM,EAAEnH,4DAA6B;MACrCoF,MAAM,EAAE,CACN;QACEwD,GAAG;QACHkD,IAAI,EAAEA,IAAI,CAAC,CAAC;MACd,CAAC;IAEL,CAAC,CAAC;EACJ;EAEA,MAAMtG,QAAQA,CAAA,EAAqC;IACjD,IAAI,IAAI,CAACxB,KAAK,CAACZ,MAAM,KAAKlD,mEAA4B,EAAE,OAAO,CAAC,CAAC;IACjE,OAAO,IAAI,CAACgH,OAAO,CAA0B;MAC3CG,mBAAmB,EAAE,CAACvH,gDAAyB,CAAC;MAChDqH,MAAM,EAAEnH,oDAAyB;MACjCoF,MAAM,EAAE,CAAC,CAAC,CAAC;IACb,CAAC,CAAC;EACJ;EAEAG,UAAUA,CAAC0G,QAAiC,EAAQ;IAClD,IAAIA,QAAQ,CAAC9H,KAAK,EAAE;MAClB,IAAI,OAAO8H,QAAQ,CAAC9H,KAAK,KAAK,QAAQ,EAAE;QACtC,MAAM,IAAI3B,KAAK,CAAC,gCAAgC,CAAC;MACnD;MACAuD,MAAM,CAACC,IAAI,CAACiG,QAAQ,CAAC9H,KAAK,CAAC,CAAC8B,OAAO,CAAEC,GAAG,IAAK;QAC3C,IAAI,CAAClC,KAAK,CAACG,KAAK,CAACmB,GAAG,CAACY,GAAG,EAAE+F,QAAQ,CAAC9H,KAAK,CAAC+B,GAAG,CAAC,CAAC;MAChD,CAAC,CAAC;IACJ;IACA,MAAM;MAAE/B;IAAM,CAAC,GAAG,IAAI,CAACH,KAAK;IAC5B,IAAI,CAACA,KAAK,GAAAtB,aAAA,CAAAA,aAAA,CAAAA,aAAA,KAAQ,IAAI,CAACsB,KAAK,GAAKiI,QAAQ;MAAE9H;IAAK,EAAE;EACpD;EAEA,MAAM/E,OAAOA,CAAC8M,OAAe,EAAEC,UAAmB,EAAkB;IAClE,IAAIpI,OAAO,GAAGoI,UAAU;IACxB,IAAI,CAACpI,OAAO,EAAE;MACZA,OAAO,GAAG,IAAI,CAACA,OAAO;IACxB;IACA;IACA,IAAI,CAAC,mBAAmB,CAACqI,IAAI,CAACrI,OAAO,CAAC,EAAE;MACtC,IAAIA,OAAO,KAAK,EAAE,IAAIA,OAAO,KAAK4D,SAAS,EAAE;QAC3C,MAAM,IAAInF,KAAK,CAAC,6BAA6B,CAAC;MAChD,CAAC,MAAM;QACL,MAAM,IAAIA,KAAK,CAAC,gCAAgC,CAAC;MACnD;IACF;IACA,OAAOpD,qBAAO,CAACC,uBAAS,CAAC+J,MAAM,CAACC,IAAI,CAACtF,OAAO,EAAE,KAAK,CAAC,CAAC,EAAEmI,OAAO,CAAC;EACjE;EAEA,MAAM/M,OAAOA,CAACkN,UAAiB,EAAEF,UAAmB,EAAmB;IACrE,IAAIpI,OAAO,GAAGoI,UAAU;IACxB,IAAI,CAACpI,OAAO,EAAE;MACZA,OAAO,GAAG,IAAI,CAACA,OAAO;IACxB;IACA;IACA,IAAI,CAAC,mBAAmB,CAACqI,IAAI,CAACrI,OAAO,CAAC,EAAE;MACtC,IAAIA,OAAO,KAAK,EAAE,IAAIA,OAAO,KAAK4D,SAAS,EAAE;QAC3C,MAAM,IAAInF,KAAK,CAAC,6BAA6B,CAAC;MAChD,CAAC,MAAM;QACL,MAAM,IAAIA,KAAK,CAAC,gCAAgC,CAAC;MACnD;IACF;IACA,OAAOrD,qBAAO,CAACiK,MAAM,CAACC,IAAI,CAACtF,OAAO,EAAE,KAAK,CAAC,EAAEsI,UAAU,CAAC;EACzD;EAEA,MAAMC,WAAWA,CAAA,EAA+B;IAC9C,IAAI,IAAI,CAACvI,OAAO,EAAE;MAChB,MAAMwI,SAAS,GAAG,IAAI,CAACvI,KAAK,CAACG,KAAK,CAACqI,QAAQ,EAAE;MAC7C,MAAMC,QAA2B,GAAG;QAClChE,KAAK,EAAG8D,SAAS,CAAC9D,KAAK,IAAe,EAAE;QACxCP,IAAI,EAAGqE,SAAS,CAACrE,IAAI,IAAe,EAAE;QACtCC,YAAY,EAAGoE,SAAS,CAACpE,YAAY,IAAe,EAAE;QACtDuE,iBAAiB,EAAGH,SAAS,CAACG,iBAAiB,IAAe,EAAE;QAChEC,QAAQ,EAAGJ,SAAS,CAACI,QAAQ,IAAe,EAAE;QAC9CC,UAAU,EAAGL,SAAS,CAACK,UAAU,IAAe,EAAE;QAClDC,WAAW,EAAGN,SAAS,CAACM,WAAW,IAAyD,EAAE;QAC9FzE,SAAS,EAAGmE,SAAS,CAACnE,SAAS,IAAe,EAAE;QAChDC,OAAO,EAAGkE,SAAS,CAAClE,OAAO,IAAe,EAAE;QAC5CC,YAAY,EAAGiE,SAAS,CAACjE,YAAY,IAAe,EAAE;QACtDC,gBAAgB,EAAGgE,SAAS,CAAChE,gBAAgB,IAAe;MAC9D,CAAC;MAED,OAAOkE,QAAQ;IACjB;IACA,MAAM,IAAIjK,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EAEA,MAAMsK,kBAAkBA,CAAC7F,WAAsD,EAAmB;IAChG,MAAM;MAAEnE;IAAY,CAAC,GAAGmE,WAAW;IACnC,MAAM;MAAEzC;IAAS,CAAC,GAAG,IAAI,CAACR,KAAK;IAC/B,IAAI,CAAC,IAAI,CAACA,KAAK,CAACT,UAAU,CAACC,MAAM,CAAC,EAAE;MAClC,MAAM,IAAI,CAACuB,gBAAgB,EAAE;IAC/B;IACA,MAAMgI,UAAU,GAAArK,aAAA;MACdkF,SAAS,EAAEpD,QAAQ;MACnB2F,OAAO,EAAE,IAAI5D,GAAG,CAACzD,WAAW,CAAC,CAACU,MAAM;MACpCoG,WAAW,EAAE,IAAI,CAAC5F,KAAK,CAACT,UAAU;MAClCT;IAAW,GACRmE,WAAW,CACf;IAED,MAAMuD,SAAS,GAAG9K,iCAAY,CAACqN,UAAU,CAAC;IAC1C,MAAMC,UAAU,GAAG;MACjBxC,SAAS;MACTE,OAAO,EAAE;IACX,CAAC;IAED,OAAOpK,8BAAY,CAAC;MAAEgK,OAAO,EAAG,GAAE,IAAI,CAACtG,KAAK,CAACK,SAAU,QAAO;MAAEkG,IAAI,EAAEyC;IAAW,CAAC,CAAC;EACrF;EAEA,MAAMC,QAAQA,CAAA,EAAkB;IAC9B,MAAM1M,+BAAa,EAAE;IACrB,MAAMwK,kBAAkB,GAAGC,QAAQ,CAACC,cAAc,CAAClL,mCAAiB,CAAsB;IAC1F,IAAIgL,kBAAkB,EAAE;MACtBA,kBAAkB,CAACG,MAAM,EAAE;MAC3B,IAAI,CAAC/F,UAAU,GAAG,IAAI;IACxB;IACA,IAAI,CAACvD,QAAQ,CAACsL,OAAO,EAAE;EACzB;AACF;AAEA,oDAAetM,SAAS;;;;;;;;;;;;;;;;;;;;;ACxkBjB,MAAMuM,WAAW,CAAmB;EAAAtM,YAAA;IAAAc,wBAAA,gBACT,CAAC,CAAC;EAAA;EAElCyL,OAAOA,CAAClH,GAAW,EAAU;IAC3B,OAAO,IAAI,CAAC/B,KAAK,CAAC+B,GAAG,CAAC,IAAI,IAAI;EAChC;EAEAmH,OAAOA,CAACnH,GAAW,EAAEoH,KAAa,EAAQ;IACxC,IAAI,CAACnJ,KAAK,CAAC+B,GAAG,CAAC,GAAGoH,KAAK;EACzB;AACF;;;;;ACZuC;AAEK;AAC6B;AAE1D,MAAMnN,cAAc,CAAC;EAClC;;EAOQU,WAAWA,CAAC6M,OAAe,EAAEC,SAAkB,EAAE;IAAAhM,wBAAA;IAAAA,wBAAA,oBAF7B4L,0BAAQ;IAGlC,IAAI,CAACG,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,SAAS,GAAGA,SAAS,IAAIJ,0BAAQ;IACtC,IAAI;MACF,IAAI,CAACG,OAAO,CAACN,OAAO,CAACO,SAAS,IAAIJ,0BAAQ,CAAC,EAAE;QAC3C,IAAI,CAACK,UAAU,EAAE;MACnB;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd;IAAA;EAEJ;EAEA,OAAOzJ,WAAWA,CAAC0J,cAAsB,EAA6D;IAAA,IAA3DlK,UAA+B,GAAA6D,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,OAAO;IAClF,IAAI,CAAC,IAAI,CAACsG,QAAQ,EAAE;MAClB,IAAIL,OAA8B,GAAG,IAAIP,WAAW,EAAE;MACtD,IAAIvJ,UAAU,KAAK,OAAO,IAAI4J,mCAAqB,EAAE;QACnDE,OAAO,GAAGM,YAAY;MACxB;MACA,IAAIpK,UAAU,KAAK,SAAS,IAAI6J,qCAAuB,EAAE;QACvDC,OAAO,GAAGO,cAAc;MAC1B;MACA,MAAMC,aAAa,GAAGJ,cAAc,GAAI,GAAEP,0BAAS,IAAGO,cAAe,EAAC,GAAGP,0BAAQ;MACjF,IAAI,CAACQ,QAAQ,GAAG,IAAI,IAAI,CAACL,OAAO,EAAEQ,aAAa,CAAC;IAClD;IACA,OAAO,IAAI,CAACH,QAAQ;EACtB;EAEAI,MAAMA,CAAA,EAAW;IACf,OAAO,IAAI,CAACT,OAAO,CAACN,OAAO,CAAC,IAAI,CAACO,SAAS,CAAC;EAC7C;EAEAC,UAAUA,CAAA,EAA4B;IACpC,MAAMQ,SAAS,GAAG,IAAI,CAAC5B,QAAQ,EAAE;IACjC,IAAI,CAACkB,OAAO,CAACL,OAAO,CAAC,IAAI,CAACM,SAAS,EAAE/H,IAAI,CAACE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;IACxD,OAAOsI,SAAS;EAClB;EAEA5B,QAAQA,CAAA,EAA4B;IAClC,OAAO5G,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC6H,OAAO,CAACN,OAAO,CAAC,IAAI,CAACO,SAAS,CAAC,CAAC;EACzD;EAEApO,GAAGA,CAAI2G,GAAW,EAAK;IACrB,MAAM/B,KAAK,GAAGyB,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC6H,OAAO,CAACN,OAAO,CAAC,IAAI,CAACO,SAAS,CAAC,CAAC;IAC9D,OAAOxJ,KAAK,CAAC+B,GAAG,CAAC;EACnB;EAEAZ,GAAGA,CAAIY,GAAW,EAAEoH,KAAQ,EAAQ;IAClC,MAAMnJ,KAAK,GAAGyB,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC6H,OAAO,CAACN,OAAO,CAAC,IAAI,CAACO,SAAS,CAAC,CAAC;IAC9DxJ,KAAK,CAAC+B,GAAG,CAAC,GAAGoH,KAAK;IAClB,IAAI,CAACI,OAAO,CAACL,OAAO,CAAC,IAAI,CAACM,SAAS,EAAE/H,IAAI,CAACE,SAAS,CAAC3B,KAAK,CAAC,CAAC;EAC7D;AACF;AAACxC,wBAAA,CA3DoBxB,cAAc;;;;;;;;;;;;;;;;;;;;;;ACLnC,MAAM,6BAA4B;;;;;;ACUC;AACmB;AAC9B;AAEK;AAEd,MAAMC,QAAQ,SAASqO,gCAAgB,CAAC;EAAA5N,YAAA;IAAA,SAAA4G,SAAA;IAAA9F,wBAAA,qBACd,IAAI;IAAAA,wBAAA;IAAAA,wBAAA;IAAAA,wBAAA;IAAAA,wBAAA;IAAAA,wBAAA;EAAA;EAY3CiD,IAAIA,CAAA+D,IAAA,EAAwF;IAAA,IAAvF;MAAExD,UAAU;MAAEd;IAAgE,CAAC,GAAAsE,IAAA;IAClF,IAAI,CAACxD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACd,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACuK,WAAW,EAAE;IAClB,IAAI,CAACC,WAAW,GAAG,IAAI;EACzB;EAEAD,WAAWA,CAAA,EAAS;IAClB,IAAI,IAAI,CAACzJ,UAAU,KAAK,IAAI,EAAE,MAAM,IAAI3C,KAAK,CAAC,gBAAgB,CAAC;IAC/D,IAAI,CAACsM,SAAS,GAAG,IAAIN,iCAAiB,CAAC;MACrCtG,IAAI,EAAE,WAAW;MACjB6G,MAAM,EAAE,YAAY;MACpBC,YAAY,EAAE,IAAI,CAAC7J,UAAU,CAAC8J,aAAa;MAC3CC,YAAY,EAAE,IAAI3I,GAAG,CAAC,IAAI,CAAClC,SAAS,CAAC,CAACb;IACxC,CAAC,CAAC;IAEF,IAAI,CAAC2L,GAAG,GAAGT,kCAAc,CAAC,IAAI,CAACI,SAAS,CAAC;IAEzC,MAAMM,cAAc,GAAGd,0CAAsB,EAAE;IAC/CK,uBAAI,CACFS,cAAc,CAACC,MAAM,EACrB,IAAI,CAACF,GAAG,CAACG,YAAY,CAAC,MAAM,CAAC,EAC7BF,cAAc,CAACC,MAAM,EACpBxB,KAAK,IAAK;MACThO,mCAAS,CAAE,wBAAuB,EAAEgO,KAAK,CAAC;IAC5C,CAAC,CACF;IAED,MAAM0B,SAAS,GAAG,IAAIhB,0BAAU,EAAE;IAClCgB,SAAS,CAAC7D,IAAI,CAAC2C,2CAAuB,EAAE,CAAC;IACzCkB,SAAS,CAAC7D,IAAI,CAAC0D,cAAc,CAACI,UAAU,CAAC;IACzC,IAAI,CAACD,SAAS,GAAGA,SAAS;EAC5B;EAEArC,OAAOA,CAAA,EAAS;IACd,IAAI,CAAC/H,UAAU,GAAG,IAAI;IACtB,IAAI,CAAC0J,WAAW,GAAG,KAAK;EAC1B;EAEAjD,WAAWA,CAAC6D,OAA6B,EAAEC,QAAsC,EAAQ;IACvF,IAAI,CAACD,OAAO,CAACE,OAAO,EAAE;MACpBF,OAAO,CAACE,OAAO,GAAG,KAAK;IACzB;IACA,IAAI,CAACF,OAAO,CAACG,EAAE,EAAE;MACfH,OAAO,CAACG,EAAE,GAAGhQ,6BAAQ,EAAE;IACzB;IACA,IAAI,CAAC2P,SAAS,CAACM,MAAM,CAACJ,OAAO,EAAEC,QAAQ,CAAC;EAC1C;AACF;;;;;;;;;;;;;;;;;;;AC7EO,MAAM3P,iBAAiB,GAAG,iBAAiB;AAE3C,MAAMwN,QAAQ,GAAG,iBAAiB;AAElC,MAAMrN,OAAO,GAAG;EACrBoH,KAAK,EAAE,OAAO;EACdjE,QAAQ,EAAE,UAAU;EACpByB,oBAAoB,EAAE;AACxB,CAAU;AAEH,MAAM9E,gBAAgB,GAAG;EAC9BoH,KAAK,EAAE,iBAAiB;EACxBU,MAAM,EAAE,kBAAkB;EAC1B+D,iBAAiB,EAAE,6BAA6B;EAChDE,YAAY,EAAE,wBAAwB;EACtCC,QAAQ,EAAE;AACZ,CAAU;AAEH,MAAMlM,oBAAoB,GAAG;EAClCwH,KAAK,EAAE,OAAO;EACdjE,QAAQ,EAAE,UAAU;EACpBwE,IAAI,EAAE;AACR,CAAU;AAEH,MAAM5H,iBAAiB,GAAG;EAC/BgC,OAAO,EAAE,SAAS;EAClBE,OAAO,EAAE,SAAS;EAClBD,IAAI,EAAE,MAAM;EACZK,WAAW,EAAE,aAAa;EAC1BH,UAAU,EAAE,YAAY;EACxBC,OAAO,EAAE,SAAS;EAClBC,IAAI,EAAE;AACR,CAAU;AAEH,MAAMwN,oBAAoB,GAAG;EAClCC,SAAS,EAAE,WAAW;EACtBC,OAAO,EAAE;AACX,CAAU;AAEH,MAAMC,cAAc,GAAG;EAC5BC,MAAM,EAAE,QAAQ;EAChBC,QAAQ,EAAE,UAAU;EACpBC,MAAM,EAAE,QAAQ;EAChBC,OAAO,EAAE,SAAS;EAClBC,MAAM,EAAE,QAAQ;EAChBC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE,QAAQ;EAChBC,KAAK,EAAE,OAAO;EACdC,QAAQ,EAAE,UAAU;EACpBC,OAAO,EAAE,SAAS;EAClBC,KAAK,EAAE,OAAO;EACdC,MAAM,EAAE,QAAQ;EAChBC,kBAAkB,EAAE,oBAAoB;EACxCC,gBAAgB,EAAE,kBAAkB;EACpCC,QAAQ,EAAE,UAAU;EACpBC,GAAG,EAAE;AACP,CAAU;AAEH,MAAMC,UAAU,GAAG;EACxBC,OAAO,EAAE,SAAS;EAClBC,QAAQ,EAAE,UAAU;EACpBC,SAAS,EAAE,WAAW;EACtBC,IAAI,EAAE;AACR,CAAU;;;;;;;;;;;;;AChEsB;AAEhCC,wDAAiB,CAAC,OAAO,CAAC;AAE1B,iEAAeA,yDAAkB,CAAC,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;ACJQ;AACmB;AAG5C;AAEtB,eAAejR,aAAaA,CAAA,EAAkB;EACnD,OAAO,IAAIyE,OAAO,CAAQsG,OAAO,IAAK;IACpC,IAAIN,QAAQ,CAAC4G,UAAU,KAAK,SAAS,EAAE;MACrCtG,OAAO,EAAE;IACX,CAAC,MAAM;MACLN,QAAQ,CAAC6G,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;QAClDvG,OAAO,EAAE;MACX,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;AACJ;AAEO,MAAM5K,aAAa,GAAuBoR,IAAY,IAAQ;EACnE,MAAMC,QAAQ,GAAGhP,MAAM,CAACiI,QAAQ,CAACgH,aAAa,CAAC,UAAU,CAAC;EAC1D,MAAMC,WAAW,GAAGH,IAAI,CAACI,IAAI,EAAE,CAAC,CAAC;EACjCH,QAAQ,CAACI,SAAS,GAAGF,WAAW;EAChC,OAAOF,QAAQ,CAACK,OAAO,CAACC,UAAU;AACpC,CAAC;AAEM,eAAeC,YAAYA,CAAC9N,QAAgB,EAAE+N,MAAc,EAAE/O,MAAc,EAAmB;EACpG,MAAMgP,SAAS,GAAGpJ,MAAM,CAACC,IAAI,CAACkJ,MAAM,CAACtO,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC;EAC9D,IAAIxE,wEAAgB,CAACJ,8DAAS,CAACmT,SAAS,CAAC,CAAC,KAAKhO,QAAQ,EAAE,MAAM,IAAIhC,KAAK,CAAC,iBAAiB,CAAC;EAC3F,MAAM2G,GAAG,GAAG,MAAM7J,yDAAI,CAACkT,SAAS,EAAEpJ,MAAM,CAACC,IAAI,CAAC1J,kEAAM,CAAC,WAAW,CAAC,CAAC2J,MAAM,CAAC9F,MAAM,CAAC,CAAC+F,MAAM,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;EACvG,OAAO9J,wEAAgB,CAAC0J,GAAG,CAAC;AAC9B;AAEO,SAAS3I,kBAAkBA,CAAA,EAA6C;EAAA,IAA5CiS,UAAU,GAAAhL,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EACnD,MAAMiL,MAAM,GAAG,CAAC,CAAC;EAEjB,MAAMpM,GAAG,GAAG,IAAIC,GAAG,CAACxD,MAAM,CAACC,QAAQ,CAAC0D,IAAI,CAAC;EACzCJ,GAAG,CAACE,YAAY,CAACP,OAAO,CAAC,CAACqH,KAAK,EAAEpH,GAAG,KAAK;IACvC,IAAIA,GAAG,KAAK,QAAQ,EAAE;MACpBwM,MAAM,CAACxM,GAAG,CAAC,GAAGoH,KAAK;IACrB;EACF,CAAC,CAAC;EACF,MAAMqF,WAAW,GAAGrM,GAAG,CAACE,YAAY,CAACjH,GAAG,CAAC,QAAQ,CAAC;EAClD,IAAIoT,WAAW,EAAE;IACf,IAAI;MACF,MAAMC,WAAW,GAAGhN,IAAI,CAACC,KAAK,CAAC8L,oEAAQ,CAACgB,WAAW,CAAC,CAAC;MACrD5M,MAAM,CAACC,IAAI,CAAC4M,WAAW,CAAC,CAAC3M,OAAO,CAAEC,GAAG,IAAK;QACxCwM,MAAM,CAACxM,GAAG,CAAC,GAAG0M,WAAW,CAAC1M,GAAG,CAAC;MAChC,CAAC,CAAC;IACJ,CAAC,CAAC,OAAO2H,KAAK,EAAE;MACdhO,sEAAS,CAACgO,KAAK,CAAC;IAClB;EACF;EAEA,MAAMtD,IAAI,GAAGjE,GAAG,CAACiE,IAAI,CAACsI,SAAS,CAAC,CAAC,CAAC;EAClC,MAAMC,OAAO,GAAG,IAAIvM,GAAG,CAAE,GAAExD,MAAM,CAACC,QAAQ,CAACQ,MAAO,KAAI+G,IAAK,EAAC,CAAC;EAC7DuI,OAAO,CAACtM,YAAY,CAACP,OAAO,CAAC,CAACqH,KAAK,EAAEpH,GAAG,KAAK;IAC3C,IAAIA,GAAG,KAAK,QAAQ,EAAE;MACpBwM,MAAM,CAACxM,GAAG,CAAC,GAAGoH,KAAK;IACrB;EACF,CAAC,CAAC;EACF,MAAMyF,UAAU,GAAGD,OAAO,CAACtM,YAAY,CAACjH,GAAG,CAAC,QAAQ,CAAC;EAErD,IAAIwT,UAAU,EAAE;IACd,IAAI;MACF,MAAM/F,UAAU,GAAGpH,IAAI,CAACC,KAAK,CAAC8L,oEAAQ,CAACoB,UAAU,CAAC,CAAC;MACnDhN,MAAM,CAACC,IAAI,CAACgH,UAAU,CAAC,CAAC/G,OAAO,CAAEC,GAAG,IAAK;QACvCwM,MAAM,CAACxM,GAAG,CAAC,GAAG8G,UAAU,CAAC9G,GAAG,CAAC;MAC/B,CAAC,CAAC;IACJ,CAAC,CAAC,OAAO2H,KAAK,EAAE;MACdhO,sEAAS,CAACgO,KAAK,CAAC;IAClB;EACF;EAEA,IAAI4E,UAAU,EAAE;IACd,MAAMO,QAAQ,GAAGjQ,MAAM,CAACC,QAAQ,CAACQ,MAAM,GAAGT,MAAM,CAACC,QAAQ,CAACG,QAAQ;IAClEJ,MAAM,CAACkQ,OAAO,CAACC,YAAY,CAAC,IAAI,EAAE,EAAE,EAAEF,QAAQ,CAAC;EACjD;EAEA,OAAON,MAAM;AACf;AAEO,SAASrS,QAAQA,CAAIuP,EAAU,EAAEhF,SAAiB,EAAc;EACrE,OAAO,IAAI5F,OAAO,CAAC,CAACsG,OAAO,EAAEK,MAAM,KAAK;IACtC,IAAI,CAACf,SAAS,EAAE;MACde,MAAM,CAAC,IAAInJ,KAAK,CAAC,uBAAuB,CAAC,CAAC;MAC1C;IACF;IACA,IAAI2Q,eAAe,GAAG,KAAK;IAC3B,MAAMC,aAAa,GAAGC,WAAW,CAAC,MAAM;MACtC,IAAI,CAACF,eAAe,IAAIvI,SAAS,CAAC0I,MAAM,EAAE;QACxCC,aAAa,CAACH,aAAa,CAAC;QAC5BzH,MAAM,CAAC,IAAInJ,KAAK,CAAC,mBAAmB,CAAC,CAAC;MACxC;IACF,CAAC,EAAE,GAAG,CAAC;IACP,MAAMgR,OAAO,GAAIC,EAAuD,IAAK;MAC3E,MAAM;QAAE7K;MAAI,CAAC,GAAG6K,EAAE,CAAC3H,IAAI;MACvB,IAAI8D,EAAE,KAAKhH,GAAG,EAAE;MAChB7F,MAAM,CAAC2Q,mBAAmB,CAAC,SAAS,EAAEF,OAAO,CAAC;MAC9CL,eAAe,GAAG,IAAI;MACtBI,aAAa,CAACH,aAAa,CAAC;MAC5BxI,SAAS,CAAC+I,KAAK,EAAE;MACjB,IAAIF,EAAE,CAAC3H,IAAI,CAACA,IAAI,IAAI2H,EAAE,CAAC3H,IAAI,CAACA,IAAI,CAAC+B,KAAK,EAAE;QACtClC,MAAM,CAAC,IAAInJ,KAAK,CAACiR,EAAE,CAAC3H,IAAI,CAACA,IAAI,CAAC+B,KAAK,CAAC,CAAC;MACvC,CAAC,MAAM;QACLvC,OAAO,CAACmI,EAAE,CAAC3H,IAAI,CAACA,IAAI,CAAC;MACvB;IACF,CAAC;IAED/I,MAAM,CAAC8O,gBAAgB,CAAC,SAAS,EAAE2B,OAAO,CAAC;EAC7C,CAAC,CAAC;AACJ;AAEO,SAASlT,YAAYA,CAAC8E,MAA4F,EAAU;EACjI,MAAM;IAAEkF,OAAO;IAAEsJ,KAAK;IAAErJ;EAAK,CAAC,GAAGnF,MAAM;EAEvC,MAAMkB,GAAG,GAAG,IAAIC,GAAG,CAAC+D,OAAO,CAAC;EAC5B,IAAIsJ,KAAK,EAAE;IACT7N,MAAM,CAACC,IAAI,CAAC4N,KAAK,CAAC,CAAC3N,OAAO,CAAEC,GAAG,IAAK;MAClCI,GAAG,CAACE,YAAY,CAACC,MAAM,CAACP,GAAG,EAAE0N,KAAK,CAAC1N,GAAG,CAAC,CAAW;IACpD,CAAC,CAAC;EACJ;EACA,IAAIqE,IAAI,EAAE;IACR,MAAMsJ,CAAC,GAAG,IAAItN,GAAG,CAACjG,YAAY,CAAC;MAAEgK,OAAO;MAAEsJ,KAAK,EAAErJ;IAAK,CAAC,CAAC,CAAC,CAAC/D,YAAY,CAAC0C,QAAQ,EAAE;IACjF5C,GAAG,CAACiE,IAAI,GAAGsJ,CAAC;EACd;EACA,OAAOvN,GAAG,CAAC4C,QAAQ,EAAE;AACvB;AAEO,SAAS4K,gBAAgBA,CAACC,IAAY,EAAW;EACtD,IAAIC,aAAa,GAAG,KAAK;EACzB,IAAIC,aAAa,GAAG,CAAC;EACrB,IAAIvG,OAAgB;EACpB,IAAI;IACFA,OAAO,GAAG3K,MAAM,CAACgR,IAAI,CAAC;IACtBC,aAAa,GAAG,IAAI;IACpBC,aAAa,GAAGvG,OAAO,CAAChG,MAAM;IAC9B,MAAMwM,CAAC,GAAG,kBAAkB;IAC5BxG,OAAO,CAACL,OAAO,CAAC6G,CAAC,EAAEA,CAAC,CAAC;IACrBxG,OAAO,CAACyG,UAAU,CAACD,CAAC,CAAC;IACrB,OAAO,IAAI;EACb,CAAC,CAAC,OAAOrG,KAAK,EAAE;IACd,OACEA,KAAK;IACL;IACCA,KAAK,CAACuG,IAAI,KAAK,EAAE;IAChB;IACAvG,KAAK,CAACuG,IAAI,KAAK,IAAI;IACnB;IACA;IACAvG,KAAK,CAAC3F,IAAI,KAAK,qBAAqB;IACpC;IACA2F,KAAK,CAAC3F,IAAI,KAAK,4BAA4B,CAAC;IAC9C;IACA8L,aAAa,IACbC,aAAa,KAAK,CAAC;EAEvB;AACF;AAEO,MAAMxG,uBAAuB,GAAGqG,gBAAgB,CAAC,gBAAgB,CAAC;AAClE,MAAMtG,qBAAqB,GAAGsG,gBAAgB,CAAC,cAAc,CAAC;AAE9D,SAASnT,aAAaA,CAAC2F,GAAW,EAAQ;EAC/C,IAAI;IACF,IAAI,OAAO0E,QAAQ,KAAK,WAAW,EAAE;IACrC,MAAMqJ,mBAAmB,GAAGrJ,QAAQ,CAACgH,aAAa,CAAC,MAAM,CAAC;IAC1DqC,mBAAmB,CAAC3N,IAAI,GAAGJ,GAAG;IAC9B+N,mBAAmB,CAACC,WAAW,GAAG,WAAW;IAC7CD,mBAAmB,CAACN,IAAI,GAAG,WAAW;IACtCM,mBAAmB,CAACE,GAAG,GAAG,UAAU;IACpC,IAAIF,mBAAmB,CAACG,OAAO,IAAIH,mBAAmB,CAACG,OAAO,CAACC,QAAQ,EAAE;MACvE,IAAIJ,mBAAmB,CAACG,OAAO,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;QACpDzJ,QAAQ,CAAC0J,IAAI,CAACrJ,WAAW,CAACgJ,mBAAmB,CAAC;MAChD;IACF;EACF,CAAC,CAAC,OAAOxG,KAAK,EAAE;IACdhO,sEAAS,CAACgO,KAAK,CAAC;EAClB;AACF;AAEO,SAASpN,gBAAgBA,CAAA,EAAW;EACzC;EACA,MAAMkU,cAAc,GAAG5R,MAAM,CAAC6R,UAAU,KAAKjN,SAAS,GAAG5E,MAAM,CAAC6R,UAAU,GAAG7R,MAAM,CAAC8R,OAAO;EAC3F,MAAMC,aAAa,GAAG/R,MAAM,CAACgS,SAAS,KAAKpN,SAAS,GAAG5E,MAAM,CAACgS,SAAS,GAAGhS,MAAM,CAACiS,OAAO;EAExF,MAAMC,CAAC,GAAG,IAAI;EACd,MAAMpB,CAAC,GAAG,GAAG;EAEb,MAAMqB,KAAK,GAAGnS,MAAM,CAACoS,UAAU,GAC3BpS,MAAM,CAACoS,UAAU,GACjBnK,QAAQ,CAACoK,eAAe,CAACC,WAAW,GACpCrK,QAAQ,CAACoK,eAAe,CAACC,WAAW,GACpCtS,MAAM,CAACuS,MAAM,CAACJ,KAAK;EAEvB,MAAMK,MAAM,GAAGxS,MAAM,CAACyS,WAAW,GAC7BzS,MAAM,CAACyS,WAAW,GAClBxK,QAAQ,CAACoK,eAAe,CAACK,YAAY,GACrCzK,QAAQ,CAACoK,eAAe,CAACK,YAAY,GACrC1S,MAAM,CAACuS,MAAM,CAACC,MAAM;EAExB,MAAMG,UAAU,GAAG,CAAC,CAAC,CAAC;;EAEtB,MAAMC,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAACX,KAAK,GAAGD,CAAC,IAAI,CAAC,GAAGS,UAAU,GAAGf,cAAc,CAAC;EACpE,MAAMmB,GAAG,GAAGF,IAAI,CAACC,GAAG,CAAC,CAACN,MAAM,GAAG1B,CAAC,IAAI,CAAC,GAAG6B,UAAU,GAAGZ,aAAa,CAAC;EACnE,MAAMiB,QAAQ,GAAI,6DAA4DlC,CAAC,GAAG6B,UAAW,UAAST,CAAC,GAAGS,UAAW,QAAOI,GAAI,SAAQH,IAAK,EAAC;EAC9I,OAAOI,QAAQ;AACjB;;;;;;;;AC9MA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN4B;AACC;AACJ;AACwB;AACX;AACV;AACiC;AACZ","sources":["webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/http-helpers\"","webpack://@toruslabs/openlogin/./src/OpenLogin.ts","webpack://@toruslabs/openlogin/./src/MemoryStore.ts","webpack://@toruslabs/openlogin/./src/OpenLoginStore.ts","webpack://@toruslabs/openlogin/external commonjs2 \"pump\"","webpack://@toruslabs/openlogin/./src/Provider.ts","webpack://@toruslabs/openlogin/./src/constants.ts","webpack://@toruslabs/openlogin/./src/loglevel.ts","webpack://@toruslabs/openlogin/./src/utils.ts","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/eccrypto\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/openlogin-jrpc\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/openlogin-utils\"","webpack://@toruslabs/openlogin/external commonjs2 \"loglevel\"","webpack://@toruslabs/openlogin/webpack/bootstrap","webpack://@toruslabs/openlogin/webpack/runtime/compat get default export","webpack://@toruslabs/openlogin/webpack/runtime/define property getters","webpack://@toruslabs/openlogin/webpack/runtime/hasOwnProperty shorthand","webpack://@toruslabs/openlogin/webpack/runtime/make namespace object","webpack://@toruslabs/openlogin/./src/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/http-helpers\");","import { decrypt, Ecies, encrypt, getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { get } from \"@toruslabs/http-helpers\";\nimport { getRpcPromiseCallback, JRPCRequest, LoginConfig, OriginData, SessionInfo, WhiteLabelData } from \"@toruslabs/openlogin-jrpc\";\nimport { base64url, jsonToBase64, keccak, randomId } from \"@toruslabs/openlogin-utils\";\nimport log from \"loglevel\";\n\nimport { ALLOWED_INTERACTIONS, modalDOMElementID, OPENLOGIN_METHOD, OPENLOGIN_NETWORK, UX_MODE } from \"./constants\";\nimport {\n  BaseLogoutParams,\n  BaseRedirectParams,\n  CUSTOM_LOGIN_PROVIDER_TYPE,\n  LOGIN_PROVIDER_TYPE,\n  LoginParams,\n  OPENLOGIN_NETWORK_TYPE,\n  OpenLoginOptions,\n  OpenloginUserInfo,\n  RequestParams,\n  UX_MODE_TYPE,\n} from \"./interfaces\";\nimport OpenLoginStore from \"./OpenLoginStore\";\nimport Provider from \"./Provider\";\nimport { awaitReq, constructURL, documentReady, getHashQueryParams, getPopupFeatures, htmlToElement, preloadIframe } from \"./utils\";\n\nexport type OpenLoginState = {\n  network: OPENLOGIN_NETWORK_TYPE;\n  privKey?: string;\n  coreKitKey?: string;\n  walletKey?: string;\n  tKey?: string;\n  oAuthPrivateKey?: string;\n  support3PC?: boolean;\n  clientId: string;\n  iframeUrl: string;\n  redirectUrl: string;\n  startUrl: string;\n  popupUrl: string;\n  store: OpenLoginStore;\n  uxMode: UX_MODE_TYPE;\n  replaceUrlOnRedirect: boolean;\n  originData: OriginData;\n  whiteLabel: WhiteLabelData;\n  loginConfig: LoginConfig;\n  storageServerUrl: string;\n  sessionNamespace: string;\n  webauthnTransports: AuthenticatorTransport[];\n};\n\nclass OpenLogin {\n  provider: Provider;\n\n  state: OpenLoginState;\n\n  iframeElem: HTMLIFrameElement;\n\n  constructor(options: OpenLoginOptions) {\n    this.provider = new Proxy(new Provider(), {\n      deleteProperty: () => true, // work around for web3\n    });\n    if (!options._iframeUrl) {\n      if (options.network === OPENLOGIN_NETWORK.MAINNET) {\n        options._iframeUrl = \"https://app.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.CYAN) {\n        options._iframeUrl = \"https://cyan.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.TESTNET) {\n        options._iframeUrl = \"https://beta.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.SK_TESTNET) {\n        options._iframeUrl = \"https://beta-sk.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.CELESTE) {\n        options._iframeUrl = \"https://celeste.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.AQUA) {\n        options._iframeUrl = \"https://aqua.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.DEVELOPMENT) {\n        options._iframeUrl = \"http://localhost:3000\";\n      }\n    }\n    if (!options._iframeUrl) {\n      throw new Error(\"unspecified network and iframeUrl\");\n    }\n    preloadIframe(options._iframeUrl);\n\n    this.initState({\n      ...options,\n      no3PC: options.no3PC ?? false,\n      _iframeUrl: options._iframeUrl,\n      _startUrl: options._startUrl ?? `${options._iframeUrl}/start`,\n      _popupUrl: options._popupUrl ?? `${options._iframeUrl}/popup-window`,\n      redirectUrl: options.redirectUrl ?? `${window.location.protocol}//${window.location.host}${window.location.pathname}`,\n      uxMode: options.uxMode ?? UX_MODE.REDIRECT,\n      replaceUrlOnRedirect: options.replaceUrlOnRedirect ?? true,\n      originData: options.originData ?? { [window.location.origin]: \"\" },\n      whiteLabel: options.whiteLabel ?? {},\n      loginConfig: options.loginConfig ?? {},\n      _storageServerUrl: options._storageServerUrl ?? \"https://broadcast-server.tor.us\",\n      storageKey: options.storageKey === \"session\" ? \"session\" : \"local\",\n      _sessionNamespace: options._sessionNamespace ?? \"\",\n      webauthnTransports: options.webauthnTransports ?? [\"internal\"],\n    });\n  }\n\n  get privKey(): string {\n    return this.state.privKey ? this.state.privKey.padStart(64, \"0\") : \"\";\n  }\n\n  get coreKitKey(): string {\n    return this.state.coreKitKey ? this.state.coreKitKey.padStart(64, \"0\") : \"\";\n  }\n\n  initState(options: Required<OpenLoginOptions>): void {\n    this.state = {\n      uxMode: options.uxMode,\n      network: options.network,\n      store: OpenLoginStore.getInstance(options._sessionNamespace, options.storageKey),\n      iframeUrl: options._iframeUrl,\n      startUrl: options._startUrl,\n      popupUrl: options._popupUrl,\n      clientId: options.clientId,\n      redirectUrl: options.redirectUrl,\n      replaceUrlOnRedirect: options.replaceUrlOnRedirect,\n      originData: options.originData,\n      loginConfig: options.loginConfig,\n      support3PC: !options.no3PC,\n      whiteLabel: options.whiteLabel,\n      storageServerUrl: options._storageServerUrl,\n      sessionNamespace: options._sessionNamespace,\n      webauthnTransports: options.webauthnTransports,\n    };\n  }\n\n  async init(): Promise<void> {\n    if (this.state.network === OPENLOGIN_NETWORK.TESTNET) {\n      // using console log because it shouldn't be affected by loglevel config\n      // eslint-disable-next-line no-console\n      console.log(\"%c WARNING! You are on testnet. Please set network: 'mainnet' in production\", \"color: #FF0000\");\n    }\n    if (this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) {\n      await this.updateOriginData();\n      // in this mode iframe is not used so support3pc must be false\n      this.state.support3PC = false;\n    } else {\n      // initialize iframe only when redirect or popup mode\n      await Promise.all([this._initIFrame(this.state.iframeUrl), this.updateOriginData()]);\n      this.provider.init({ iframeElem: this.iframeElem, iframeUrl: this.state.iframeUrl });\n    }\n\n    const params = getHashQueryParams(this.state.replaceUrlOnRedirect);\n    if (params.sessionId) {\n      this.state.store.set(\"sessionId\", params.sessionId);\n    }\n    if (this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) {\n      this._syncState(params);\n    } else {\n      this._syncState(await this._getData());\n    }\n\n    if (this.state.support3PC) {\n      const res = await this._check3PCSupport();\n      this.state.support3PC = !!res.support3PC;\n    }\n  }\n\n  async updateOriginData(): Promise<void> {\n    const filteredOriginData = JSON.parse(JSON.stringify(this.state.originData));\n    Object.keys(filteredOriginData).forEach((key) => {\n      if (filteredOriginData[key] === \"\") delete filteredOriginData[key];\n    });\n    const [whitelist, whiteLabel] = await Promise.all([this.getWhitelist(), this.getWhiteLabel()]);\n    this._syncState({ originData: { ...whitelist, ...filteredOriginData }, whiteLabel: { ...whiteLabel, ...this.state.whiteLabel } });\n  }\n\n  async getWhitelist(): Promise<OriginData> {\n    try {\n      const { clientId } = this.state;\n      if (!clientId) {\n        throw new Error(\"unspecified clientId\");\n      }\n      const url = new URL(\"https://api.developer.tor.us/whitelist\");\n      url.searchParams.append(\"project_id\", this.state.clientId);\n      url.searchParams.append(\"network\", this.state.network);\n      const res = await get<{ signed_urls: OriginData }>(url.href);\n      return res.signed_urls;\n    } catch (_) {\n      // fail silently\n      return {};\n    }\n  }\n\n  async getWhiteLabel(): Promise<WhiteLabelData> {\n    try {\n      const { clientId } = this.state;\n      if (!clientId) {\n        throw new Error(\"unspecified clientId\");\n      }\n      const url = new URL(\"https://api.developer.tor.us/whitelabel\");\n      url.searchParams.append(\"project_id\", this.state.clientId);\n      const res = await get<{ whiteLabel: WhiteLabelData }>(url.href);\n      return res.whiteLabel;\n    } catch (_) {\n      // fail silently\n      return {};\n    }\n  }\n\n  async login(params: LoginParams & Partial<BaseRedirectParams>): Promise<{ privKey: string }> {\n    if (!params || !params.loginProvider) {\n      throw new Error(`Please pass loginProvider in params`);\n    }\n\n    return this._selectedLogin(params);\n  }\n\n  async _selectedLogin(params: LoginParams & Partial<BaseRedirectParams>): Promise<{ privKey: string }> {\n    const defaultParams: BaseRedirectParams = {\n      redirectUrl: this.state.redirectUrl,\n    };\n\n    const loginParams: LoginParams = {\n      loginProvider: params.loginProvider,\n      ...defaultParams,\n      ...params,\n    };\n\n    const res = await this.request<{ privKey: string; store?: Record<string, string> }>({\n      method: OPENLOGIN_METHOD.LOGIN,\n      allowedInteractions: [UX_MODE.REDIRECT, UX_MODE.POPUP],\n      startUrl: this.state.startUrl,\n      popupUrl: this.state.popupUrl,\n      params: [loginParams],\n    });\n    this.state.privKey = res.privKey;\n    if (res.store) {\n      this._syncState(res);\n    } else if (this.state.privKey && this.state.support3PC) {\n      this._syncState(await this._getData());\n    }\n    return { privKey: this.privKey };\n  }\n\n  async logout(logoutParams: Partial<BaseLogoutParams> & Partial<BaseRedirectParams> = {}): Promise<void> {\n    const params: Record<string, unknown> = {};\n    // defaults\n    params.redirectUrl = this.state.redirectUrl;\n    params._clientId = this.state.clientId;\n    params.sessionId = this.state.store.get(\"sessionId\");\n\n    if (logoutParams.clientId) {\n      params._clientId = logoutParams.clientId;\n    }\n    if (logoutParams.redirectUrl !== undefined) {\n      params.redirectUrl = logoutParams.redirectUrl;\n    }\n\n    const allowedInteractions = this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT ? [ALLOWED_INTERACTIONS.REDIRECT] : [ALLOWED_INTERACTIONS.JRPC];\n    const res = await this.request<void>({\n      method: OPENLOGIN_METHOD.LOGOUT,\n      params: [params],\n      startUrl: this.state.startUrl,\n      popupUrl: this.state.popupUrl,\n      allowedInteractions,\n    });\n\n    this._syncState({\n      privKey: \"\",\n      coreKitKey: \"\",\n      walletKey: \"\",\n      oAuthPrivateKey: \"\",\n      tKey: \"\",\n      store: {\n        name: \"\",\n        profileImage: \"\",\n        dappShare: \"\",\n        idToken: \"\",\n        oAuthIdToken: \"\",\n        oAuthAccessToken: \"\",\n        sessionId: \"\",\n        sessionNamespace: \"\",\n        appState: \"\",\n        email: \"\",\n      },\n    });\n\n    return res;\n  }\n\n  async request<T>(args: RequestParams): Promise<T> {\n    const pid = randomId();\n    let { params } = args;\n\n    // Note: _origin is added later in postMessageStream for jrpc requests\n    // do not add it here since its used for checking postMessage constraints\n    const session: Partial<SessionInfo> = {};\n    if (params.length !== 1) throw new Error(\"request params array should have only one element\");\n    const { startUrl, popupUrl, method, allowedInteractions } = args;\n    if (allowedInteractions.length === 0) throw new Error(\"no allowed interactions\");\n\n    if (this.state.clientId) {\n      session._clientId = this.state.clientId;\n    }\n    if (this.state.sessionNamespace) {\n      session._sessionNamespace = this.state.sessionNamespace;\n    }\n\n    if (this.privKey) {\n      const userData = {\n        clientId: session._clientId,\n        timestamp: Date.now().toString(),\n      };\n      const sig = await sign(\n        Buffer.from(this.privKey, \"hex\"),\n        Buffer.from(keccak(\"keccak256\").update(JSON.stringify(userData)).digest(\"hex\"), \"hex\")\n      );\n      session._user = getPublic(Buffer.from(this.privKey, \"hex\")).toString(\"hex\");\n      session._userSig = base64url.encode(sig);\n      session._userData = userData;\n    }\n\n    session._originData = this.state.originData;\n    session._whiteLabelData = this.state.whiteLabel;\n    session._loginConfig = this.state.loginConfig;\n    session._sessionId = this.state.store.get(\"sessionId\");\n    session._webauthnTransports = this.state.webauthnTransports;\n\n    if (!session._sessionId) {\n      const sessionId = randomId();\n      session._sessionId = sessionId as string;\n      this.state.store.set(\"sessionId\", sessionId);\n    }\n\n    // add in session data (allow overrides)\n    params = [{ ...session, ...params[0] }];\n\n    // use JRPC where possible\n\n    if (allowedInteractions.includes(ALLOWED_INTERACTIONS.JRPC)) {\n      return this._jrpcRequest<Record<string, unknown>[], T>({ method, params });\n    }\n\n    // set origin\n    params[0]._origin = new URL((params[0].redirectUrl as string) ?? this.state.redirectUrl).origin;\n\n    // preset params\n    if (this.state.support3PC) {\n      // set params first if 3PC supported\n      await this._setPIDData(pid, params);\n      // eslint-disable-next-line require-atomic-updates\n      params = [{}];\n    }\n\n    if (!startUrl || !popupUrl) {\n      throw new Error(\"no url for redirect / popup flow\");\n    }\n\n    // method and pid are always in URL hash params\n    // convert params from JSON to base64\n\n    if (this.state.uxMode === UX_MODE.REDIRECT || this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) {\n      // if redirects preferred, check for redirect flows first, then check for popup flow\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.REDIRECT)) {\n        // give time for synchronous methods to complete before redirect\n        setTimeout(() => {\n          window.location.href = constructURL({\n            baseURL: startUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          });\n        }, 50);\n        return {} as T;\n      }\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.POPUP)) {\n        const u = new URL(\n          constructURL({\n            baseURL: popupUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          })\n        );\n        const windowRef = window.open(u.toString(), \"_blank\", getPopupFeatures());\n        return awaitReq<T>(pid, windowRef);\n      }\n    } else {\n      // if popups preferred, check for popup flows first, then check for redirect flow\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.POPUP)) {\n        const u = new URL(\n          constructURL({\n            baseURL: popupUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          })\n        );\n        const windowRef = window.open(u.toString(), \"_blank\", getPopupFeatures());\n        return awaitReq<T>(pid, windowRef);\n      }\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.REDIRECT)) {\n        // give time for synchronous methods to complete before redirect\n        setTimeout(() => {\n          window.location.href = constructURL({\n            baseURL: startUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          });\n        }, 50);\n        return null;\n      }\n    }\n\n    throw new Error(\"no matching allowed interactions\");\n  }\n\n  async _initIFrame(src: string): Promise<void> {\n    await documentReady();\n    const documentIFrameElem = document.getElementById(modalDOMElementID) as HTMLIFrameElement;\n    if (documentIFrameElem) {\n      documentIFrameElem.remove();\n      log.info(\"already initialized, removing previous modal iframe\");\n    }\n    this.iframeElem = htmlToElement<HTMLIFrameElement>(\n      `<iframe\n        id=${modalDOMElementID}\n        class=\"torusIframe\"\n        src=\"${src}\"\n        style=\"display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: 99999\"\n      ></iframe>`\n    );\n    document.body.appendChild(this.iframeElem);\n    return new Promise<void>((resolve) => {\n      this.iframeElem.onload = () => {\n        resolve();\n      };\n    });\n  }\n\n  async _jrpcRequest<T, U>(args: JRPCRequest<T>): Promise<U> {\n    // await this.initialized;\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw new Error(\"invalid request args\");\n    }\n\n    const { method, params } = args;\n\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw new Error(\"invalid request method\");\n    }\n\n    if (params === undefined || !Array.isArray(params)) {\n      throw new Error(\"invalid request params\");\n    }\n\n    if (params.length === 0) {\n      params.push({});\n    }\n\n    return new Promise<U>((resolve, reject) => {\n      this.provider._rpcRequest({ method, params }, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n\n  async _check3PCSupport(): Promise<Record<string, boolean>> {\n    return this._jrpcRequest<Record<string, unknown>[], Record<string, boolean>>({\n      method: OPENLOGIN_METHOD.CHECK_3PC_SUPPORT,\n      params: [{ _originData: this.state.originData }],\n    });\n  }\n\n  async _setPIDData(pid: string, data: Record<string, unknown>[]): Promise<void> {\n    await this.request({\n      allowedInteractions: [ALLOWED_INTERACTIONS.JRPC],\n      method: OPENLOGIN_METHOD.SET_PID_DATA,\n      params: [\n        {\n          pid,\n          data: data[0],\n        },\n      ],\n    });\n  }\n\n  async _getData(): Promise<Record<string, unknown>> {\n    if (this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) return {};\n    return this.request<Record<string, unknown>>({\n      allowedInteractions: [ALLOWED_INTERACTIONS.JRPC],\n      method: OPENLOGIN_METHOD.GET_DATA,\n      params: [{}],\n    });\n  }\n\n  _syncState(newState: Record<string, unknown>): void {\n    if (newState.store) {\n      if (typeof newState.store !== \"object\") {\n        throw new Error(\"expected store to be an object\");\n      }\n      Object.keys(newState.store).forEach((key) => {\n        this.state.store.set(key, newState.store[key]);\n      });\n    }\n    const { store } = this.state;\n    this.state = { ...this.state, ...newState, store };\n  }\n\n  async encrypt(message: Buffer, privateKey?: string): Promise<Ecies> {\n    let privKey = privateKey;\n    if (!privKey) {\n      privKey = this.privKey;\n    }\n    // validations\n    if (!/^[0-9a-fA-f]{64}$/.exec(privKey)) {\n      if (privKey === \"\" || privKey === undefined) {\n        throw new Error(\"private key cannot be empty\");\n      } else {\n        throw new Error(\"invalid private key in encrypt\");\n      }\n    }\n    return encrypt(getPublic(Buffer.from(privKey, \"hex\")), message);\n  }\n\n  async decrypt(ciphertext: Ecies, privateKey?: string): Promise<Buffer> {\n    let privKey = privateKey;\n    if (!privKey) {\n      privKey = this.privKey;\n    }\n    // validations\n    if (!/^[0-9a-fA-f]{64}$/.exec(privKey)) {\n      if (privKey === \"\" || privKey === undefined) {\n        throw new Error(\"private key cannot be empty\");\n      } else {\n        throw new Error(\"invalid private key in decrypt\");\n      }\n    }\n    return decrypt(Buffer.from(privKey, \"hex\"), ciphertext);\n  }\n\n  async getUserInfo(): Promise<OpenloginUserInfo> {\n    if (this.privKey) {\n      const storeData = this.state.store.getStore();\n      const userInfo: OpenloginUserInfo = {\n        email: (storeData.email as string) || \"\",\n        name: (storeData.name as string) || \"\",\n        profileImage: (storeData.profileImage as string) || \"\",\n        aggregateVerifier: (storeData.aggregateVerifier as string) || \"\",\n        verifier: (storeData.verifier as string) || \"\",\n        verifierId: (storeData.verifierId as string) || \"\",\n        typeOfLogin: (storeData.typeOfLogin as LOGIN_PROVIDER_TYPE | CUSTOM_LOGIN_PROVIDER_TYPE) || \"\",\n        dappShare: (storeData.dappShare as string) || \"\",\n        idToken: (storeData.idToken as string) || \"\",\n        oAuthIdToken: (storeData.oAuthIdToken as string) || \"\",\n        oAuthAccessToken: (storeData.oAuthAccessToken as string) || \"\",\n      };\n\n      return userInfo;\n    }\n    throw new Error(\"user should be logged in to fetch userInfo\");\n  }\n\n  async getEncodedLoginUrl(loginParams: LoginParams & Partial<BaseRedirectParams>): Promise<string> {\n    const { redirectUrl } = loginParams;\n    const { clientId } = this.state;\n    if (!this.state.originData[origin]) {\n      await this.updateOriginData();\n    }\n    const dataObject = {\n      _clientId: clientId,\n      _origin: new URL(redirectUrl).origin,\n      _originData: this.state.originData,\n      redirectUrl,\n      ...loginParams,\n    };\n\n    const b64Params = jsonToBase64(dataObject);\n    const hashParams = {\n      b64Params,\n      _method: \"openlogin_login\",\n    };\n\n    return constructURL({ baseURL: `${this.state.iframeUrl}/start`, hash: hashParams });\n  }\n\n  async _cleanup(): Promise<void> {\n    await documentReady();\n    const documentIFrameElem = document.getElementById(modalDOMElementID) as HTMLIFrameElement;\n    if (documentIFrameElem) {\n      documentIFrameElem.remove();\n      this.iframeElem = null;\n    }\n    this.provider.cleanup();\n  }\n}\n\nexport default OpenLogin;\n","import { IStore } from \"./IStore\";\n\nexport class MemoryStore implements IStore {\n  store: Record<string, string> = {};\n\n  getItem(key: string): string {\n    return this.store[key] || null;\n  }\n\n  setItem(key: string, value: string): void {\n    this.store[key] = value;\n  }\n}\n","import { storeKey } from \"./constants\";\nimport { IStore } from \"./IStore\";\nimport { MemoryStore } from \"./MemoryStore\";\nimport { localStorageAvailable, sessionStorageAvailable } from \"./utils\";\n\nexport default class OpenLoginStore {\n  // eslint-disable-next-line no-use-before-define\n  private static instance: OpenLoginStore;\n\n  public storage: IStore;\n\n  private _storeKey: string = storeKey;\n\n  private constructor(storage: IStore, _storeKey?: string) {\n    this.storage = storage;\n    this._storeKey = _storeKey || storeKey;\n    try {\n      if (!storage.getItem(_storeKey || storeKey)) {\n        this.resetStore();\n      }\n    } catch (error) {\n      // Storage is not available\n    }\n  }\n\n  static getInstance(storeNamespace: string, storageKey: \"session\" | \"local\" = \"local\"): OpenLoginStore {\n    if (!this.instance) {\n      let storage: Storage | MemoryStore = new MemoryStore();\n      if (storageKey === \"local\" && localStorageAvailable) {\n        storage = localStorage;\n      }\n      if (storageKey === \"session\" && sessionStorageAvailable) {\n        storage = sessionStorage;\n      }\n      const finalStoreKey = storeNamespace ? `${storeKey}_${storeNamespace}` : storeKey;\n      this.instance = new this(storage, finalStoreKey);\n    }\n    return this.instance;\n  }\n\n  toJSON(): string {\n    return this.storage.getItem(this._storeKey);\n  }\n\n  resetStore(): Record<string, unknown> {\n    const currStore = this.getStore();\n    this.storage.setItem(this._storeKey, JSON.stringify({}));\n    return currStore;\n  }\n\n  getStore(): Record<string, unknown> {\n    return JSON.parse(this.storage.getItem(this._storeKey));\n  }\n\n  get<T>(key: string): T {\n    const store = JSON.parse(this.storage.getItem(this._storeKey));\n    return store[key];\n  }\n\n  set<T>(key: string, value: T): void {\n    const store = JSON.parse(this.storage.getItem(this._storeKey));\n    store[key] = value;\n    this.storage.setItem(this._storeKey, JSON.stringify(store));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"pump\");","import {\n  createIdRemapMiddleware,\n  createStreamMiddleware,\n  JRPCEngine,\n  JRPCRequest,\n  ObjectMultiplex,\n  PostMessageStream,\n  SafeEventEmitter,\n  setupMultiplex,\n  Stream,\n} from \"@toruslabs/openlogin-jrpc\";\nimport { randomId } from \"@toruslabs/openlogin-utils\";\nimport pump from \"pump\";\n\nimport log from \"./loglevel\";\n\nexport default class Provider extends SafeEventEmitter {\n  iframeElem: HTMLIFrameElement | null = null;\n\n  rpcStream: PostMessageStream;\n\n  iframeUrl: string;\n\n  rpcEngine: JRPCEngine;\n\n  initialized: boolean;\n\n  mux: ObjectMultiplex;\n\n  init({ iframeElem, iframeUrl }: { iframeElem: HTMLIFrameElement; iframeUrl: string }): void {\n    this.iframeElem = iframeElem;\n    this.iframeUrl = iframeUrl;\n    this.setupStream();\n    this.initialized = true;\n  }\n\n  setupStream(): void {\n    if (this.iframeElem === null) throw new Error(\"iframe is null\");\n    this.rpcStream = new PostMessageStream({\n      name: \"embed_rpc\",\n      target: \"iframe_rpc\",\n      targetWindow: this.iframeElem.contentWindow,\n      targetOrigin: new URL(this.iframeUrl).origin,\n    });\n\n    this.mux = setupMultiplex(this.rpcStream);\n\n    const JRPCConnection = createStreamMiddleware();\n    pump(\n      JRPCConnection.stream as unknown as Stream,\n      this.mux.createStream(\"jrpc\") as unknown as Stream,\n      JRPCConnection.stream as unknown as Stream,\n      (error) => {\n        log.error(`JRPC connection broken`, error);\n      }\n    );\n\n    const rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(JRPCConnection.middleware);\n    this.rpcEngine = rpcEngine;\n  }\n\n  cleanup(): void {\n    this.iframeElem = null;\n    this.initialized = false;\n  }\n\n  _rpcRequest(payload: JRPCRequest<unknown>, callback: (...args: unknown[]) => void): void {\n    if (!payload.jsonrpc) {\n      payload.jsonrpc = \"2.0\";\n    }\n    if (!payload.id) {\n      payload.id = randomId();\n    }\n    this.rpcEngine.handle(payload, callback);\n  }\n}\n","export const modalDOMElementID = \"openlogin-modal\";\n\nexport const storeKey = \"openlogin_store\";\n\nexport const UX_MODE = {\n  POPUP: \"popup\",\n  REDIRECT: \"redirect\",\n  SESSIONLESS_REDIRECT: \"sessionless_redirect\",\n} as const;\n\nexport const OPENLOGIN_METHOD = {\n  LOGIN: \"openlogin_login\",\n  LOGOUT: \"openlogin_logout\",\n  CHECK_3PC_SUPPORT: \"openlogin_check_3PC_support\",\n  SET_PID_DATA: \"openlogin_set_pid_data\",\n  GET_DATA: \"openlogin_get_data\",\n} as const;\n\nexport const ALLOWED_INTERACTIONS = {\n  POPUP: \"popup\",\n  REDIRECT: \"redirect\",\n  JRPC: \"jrpc\",\n} as const;\n\nexport const OPENLOGIN_NETWORK = {\n  MAINNET: \"mainnet\",\n  TESTNET: \"testnet\",\n  CYAN: \"cyan\",\n  DEVELOPMENT: \"development\",\n  SK_TESTNET: \"sk_testnet\",\n  CELESTE: \"celeste\",\n  AQUA: \"aqua\",\n} as const;\n\nexport const SUPPORTED_KEY_CURVES = {\n  SECP256K1: \"secp256k1\",\n  ED25519: \"ed25519\",\n} as const;\n\nexport const LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\",\n  SMS_PASSWORDLESS: \"sms_passwordless\",\n  WEBAUTHN: \"webauthn\",\n  JWT: \"jwt\",\n} as const;\n\nexport const MFA_LEVELS = {\n  DEFAULT: \"default\",\n  OPTIONAL: \"optional\",\n  MANDATORY: \"mandatory\",\n  NONE: \"none\",\n} as const;\n","import loglevel from \"loglevel\";\n\nloglevel.setLevel(\"error\");\n\nexport default loglevel.getLogger(\"openlogin\");\n","import { getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { base64url, keccak, safeatob } from \"@toruslabs/openlogin-utils\";\n\nimport { PopupResponse } from \"./interfaces\";\nimport log from \"./loglevel\";\n\nexport async function documentReady(): Promise<void> {\n  return new Promise<void>((resolve) => {\n    if (document.readyState !== \"loading\") {\n      resolve();\n    } else {\n      document.addEventListener(\"DOMContentLoaded\", () => {\n        resolve();\n      });\n    }\n  });\n}\n\nexport const htmlToElement = <T extends Element>(html: string): T => {\n  const template = window.document.createElement(\"template\");\n  const trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild as T;\n};\n\nexport async function whitelistUrl(clientId: string, appKey: string, origin: string): Promise<string> {\n  const appKeyBuf = Buffer.from(appKey.padStart(64, \"0\"), \"hex\");\n  if (base64url.encode(getPublic(appKeyBuf)) !== clientId) throw new Error(\"appKey mismatch\");\n  const sig = await sign(appKeyBuf, Buffer.from(keccak(\"keccak256\").update(origin).digest(\"hex\"), \"hex\"));\n  return base64url.encode(sig);\n}\n\nexport function getHashQueryParams(replaceUrl = false): Record<string, string> {\n  const result = {};\n\n  const url = new URL(window.location.href);\n  url.searchParams.forEach((value, key) => {\n    if (key !== \"result\") {\n      result[key] = value;\n    }\n  });\n  const queryResult = url.searchParams.get(\"result\");\n  if (queryResult) {\n    try {\n      const queryParams = JSON.parse(safeatob(queryResult));\n      Object.keys(queryParams).forEach((key) => {\n        result[key] = queryParams[key];\n      });\n    } catch (error) {\n      log.error(error);\n    }\n  }\n\n  const hash = url.hash.substring(1);\n  const hashUrl = new URL(`${window.location.origin}/?${hash}`);\n  hashUrl.searchParams.forEach((value, key) => {\n    if (key !== \"result\") {\n      result[key] = value;\n    }\n  });\n  const hashResult = hashUrl.searchParams.get(\"result\");\n\n  if (hashResult) {\n    try {\n      const hashParams = JSON.parse(safeatob(hashResult));\n      Object.keys(hashParams).forEach((key) => {\n        result[key] = hashParams[key];\n      });\n    } catch (error) {\n      log.error(error);\n    }\n  }\n\n  if (replaceUrl) {\n    const cleanUrl = window.location.origin + window.location.pathname;\n    window.history.replaceState(null, \"\", cleanUrl);\n  }\n\n  return result;\n}\n\nexport function awaitReq<T>(id: string, windowRef: Window): Promise<T> {\n  return new Promise((resolve, reject) => {\n    if (!windowRef) {\n      reject(new Error(\"Unable to open window\"));\n      return;\n    }\n    let closedByHandler = false;\n    const closedMonitor = setInterval(() => {\n      if (!closedByHandler && windowRef.closed) {\n        clearInterval(closedMonitor);\n        reject(new Error(\"user closed popup\"));\n      }\n    }, 500);\n    const handler = (ev: MessageEvent<PopupResponse<T & { error?: string }>>) => {\n      const { pid } = ev.data;\n      if (id !== pid) return;\n      window.removeEventListener(\"message\", handler);\n      closedByHandler = true;\n      clearInterval(closedMonitor);\n      windowRef.close();\n      if (ev.data.data && ev.data.data.error) {\n        reject(new Error(ev.data.data.error));\n      } else {\n        resolve(ev.data.data);\n      }\n    };\n\n    window.addEventListener(\"message\", handler);\n  });\n}\n\nexport function constructURL(params: { baseURL: string; query?: Record<string, unknown>; hash?: Record<string, unknown> }): string {\n  const { baseURL, query, hash } = params;\n\n  const url = new URL(baseURL);\n  if (query) {\n    Object.keys(query).forEach((key) => {\n      url.searchParams.append(key, query[key] as string);\n    });\n  }\n  if (hash) {\n    const h = new URL(constructURL({ baseURL, query: hash })).searchParams.toString();\n    url.hash = h;\n  }\n  return url.toString();\n}\n\nexport function storageAvailable(type: string): boolean {\n  let storageExists = false;\n  let storageLength = 0;\n  let storage: Storage;\n  try {\n    storage = window[type];\n    storageExists = true;\n    storageLength = storage.length;\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (error) {\n    return (\n      error &&\n      // everything except Firefox\n      (error.code === 22 ||\n        // Firefox\n        error.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        error.name === \"QuotaExceededErro r\" ||\n        // Firefox\n        error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storageExists &&\n      storageLength !== 0\n    );\n  }\n}\n\nexport const sessionStorageAvailable = storageAvailable(\"sessionStorage\");\nexport const localStorageAvailable = storageAvailable(\"localStorage\");\n\nexport function preloadIframe(url: string): void {\n  try {\n    if (typeof document === \"undefined\") return;\n    const openloginIframeHtml = document.createElement(\"link\");\n    openloginIframeHtml.href = url;\n    openloginIframeHtml.crossOrigin = \"anonymous\";\n    openloginIframeHtml.type = \"text/html\";\n    openloginIframeHtml.rel = \"prefetch\";\n    if (openloginIframeHtml.relList && openloginIframeHtml.relList.supports) {\n      if (openloginIframeHtml.relList.supports(\"prefetch\")) {\n        document.head.appendChild(openloginIframeHtml);\n      }\n    }\n  } catch (error) {\n    log.error(error);\n  }\n}\n\nexport function getPopupFeatures(): string {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n\n  const w = 1200;\n  const h = 700;\n\n  const width = window.innerWidth\n    ? window.innerWidth\n    : document.documentElement.clientWidth\n    ? document.documentElement.clientWidth\n    : window.screen.width;\n\n  const height = window.innerHeight\n    ? window.innerHeight\n    : document.documentElement.clientHeight\n    ? document.documentElement.clientHeight\n    : window.screen.height;\n\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = `titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h / systemZoom},width=${w / systemZoom},top=${top},left=${left}`;\n  return features;\n}\n","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@toruslabs/eccrypto\");","module.exports = require(\"@toruslabs/openlogin-jrpc\");","module.exports = require(\"@toruslabs/openlogin-utils\");","module.exports = require(\"loglevel\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from \"./constants\";\nexport * from \"./interfaces\";\nexport * from \"./IStore\";\nexport { default as loglevel } from \"./loglevel\";\nexport { default } from \"./OpenLogin\";\nexport * from \"./OpenLogin\";\nexport { default as OpenLoginStore } from \"./OpenLoginStore\";\nexport { default as Provider } from \"./Provider\";\nexport * from \"./utils\";\n"],"names":["decrypt","encrypt","getPublic","sign","get","getRpcPromiseCallback","base64url","jsonToBase64","keccak","randomId","log","ALLOWED_INTERACTIONS","modalDOMElementID","OPENLOGIN_METHOD","OPENLOGIN_NETWORK","UX_MODE","OpenLoginStore","Provider","awaitReq","constructURL","documentReady","getHashQueryParams","getPopupFeatures","htmlToElement","preloadIframe","OpenLogin","constructor","options","_options$no3PC","_options$_startUrl","_options$_popupUrl","_options$redirectUrl","_options$uxMode","_options$replaceUrlOn","_options$originData","_options$whiteLabel","_options$loginConfig","_options$_storageServ","_options$_sessionName","_options$webauthnTran","_defineProperty","provider","Proxy","deleteProperty","_iframeUrl","network","MAINNET","CYAN","TESTNET","SK_TESTNET","CELESTE","AQUA","DEVELOPMENT","Error","initState","_objectSpread","no3PC","_startUrl","_popupUrl","redirectUrl","window","location","protocol","host","pathname","uxMode","REDIRECT","replaceUrlOnRedirect","originData","origin","whiteLabel","loginConfig","_storageServerUrl","storageKey","_sessionNamespace","webauthnTransports","privKey","state","padStart","coreKitKey","store","getInstance","iframeUrl","startUrl","popupUrl","clientId","support3PC","storageServerUrl","sessionNamespace","init","console","SESSIONLESS_REDIRECT","updateOriginData","Promise","all","_initIFrame","iframeElem","params","sessionId","set","_syncState","_getData","res","_check3PCSupport","filteredOriginData","JSON","parse","stringify","Object","keys","forEach","key","whitelist","getWhitelist","getWhiteLabel","url","URL","searchParams","append","href","signed_urls","_","login","loginProvider","_selectedLogin","defaultParams","loginParams","request","method","LOGIN","allowedInteractions","POPUP","logout","logoutParams","arguments","length","undefined","_clientId","JRPC","LOGOUT","walletKey","oAuthPrivateKey","tKey","name","profileImage","dappShare","idToken","oAuthIdToken","oAuthAccessToken","appState","email","args","_ref","pid","session","userData","timestamp","Date","now","toString","sig","Buffer","from","update","digest","_user","_userSig","encode","_userData","_originData","_whiteLabelData","_loginConfig","_sessionId","_webauthnTransports","includes","_jrpcRequest","_origin","_setPIDData","setTimeout","baseURL","hash","b64Params","_pid","_method","u","windowRef","open","src","documentIFrameElem","document","getElementById","remove","info","body","appendChild","resolve","onload","Array","isArray","push","reject","_rpcRequest","CHECK_3PC_SUPPORT","data","SET_PID_DATA","GET_DATA","newState","message","privateKey","exec","ciphertext","getUserInfo","storeData","getStore","userInfo","aggregateVerifier","verifier","verifierId","typeOfLogin","getEncodedLoginUrl","dataObject","hashParams","_cleanup","cleanup","MemoryStore","getItem","setItem","value","storeKey","localStorageAvailable","sessionStorageAvailable","storage","_storeKey","resetStore","error","storeNamespace","instance","localStorage","sessionStorage","finalStoreKey","toJSON","currStore","createIdRemapMiddleware","createStreamMiddleware","JRPCEngine","PostMessageStream","SafeEventEmitter","setupMultiplex","pump","setupStream","initialized","rpcStream","target","targetWindow","contentWindow","targetOrigin","mux","JRPCConnection","stream","createStream","rpcEngine","middleware","payload","callback","jsonrpc","id","handle","SUPPORTED_KEY_CURVES","SECP256K1","ED25519","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","SMS_PASSWORDLESS","WEBAUTHN","JWT","MFA_LEVELS","DEFAULT","OPTIONAL","MANDATORY","NONE","loglevel","setLevel","getLogger","safeatob","readyState","addEventListener","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","whitelistUrl","appKey","appKeyBuf","replaceUrl","result","queryResult","queryParams","substring","hashUrl","hashResult","cleanUrl","history","replaceState","closedByHandler","closedMonitor","setInterval","closed","clearInterval","handler","ev","removeEventListener","close","query","h","storageAvailable","type","storageExists","storageLength","x","removeItem","code","openloginIframeHtml","crossOrigin","rel","relList","supports","head","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","w","width","innerWidth","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","left","Math","abs","top","features","default"],"sourceRoot":""}